import{az as i,z as a,A as n,b3 as t}from"./chunks/framework.C0p65Cub.js";const c=JSON.parse('{"title":"@iswangh/element-plus-kit-core 开发文档","description":"","frontmatter":{},"headers":[],"relativePath":"development/core.md","filePath":"development/core.md","lastUpdated":1762507475000}'),l={name:"development/core.md"};function e(p,s,h,o,k,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="iswangh-element-plus-kit-core-开发文档" tabindex="-1">@iswangh/element-plus-kit-core 开发文档 <a class="header-anchor" href="#iswangh-element-plus-kit-core-开发文档" aria-label="Permalink to &quot;@iswangh/element-plus-kit-core 开发文档&quot;">​</a></h1><p>本文档详细解释了 <code>@iswangh/element-plus-kit-core</code> 包的完整开发配置，包括 <code>package.json</code>、<code>tsconfig.json</code> 和 <code>vite.config.ts</code> 的详细说明。</p><hr><h2 id="📋-目录" tabindex="-1">📋 目录 <a class="header-anchor" href="#📋-目录" aria-label="Permalink to &quot;📋 目录&quot;">​</a></h2><ul><li><a href="#packagejson-配置详解">package.json 配置详解</a></li><li><a href="#tsconfigjson-配置详解">tsconfig.json 配置详解</a></li><li><a href="#viteconfigts-配置详解">vite.config.ts 配置详解</a></li><li><a href="#配置文件之间的关系">配置文件之间的关系</a></li><li><a href="#开发工作流">开发工作流</a></li><li><a href="#常见问题">常见问题</a></li></ul><hr><h2 id="package-json-配置详解" tabindex="-1">package.json 配置详解 <a class="header-anchor" href="#package-json-配置详解" aria-label="Permalink to &quot;package.json 配置详解&quot;">​</a></h2><h3 id="📋-完整配置" tabindex="-1">📋 完整配置 <a class="header-anchor" href="#📋-完整配置" aria-label="Permalink to &quot;📋 完整配置&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@iswangh/element-plus-kit-core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Element Plus Kit core utilities&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.d.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.d.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;files&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;README.md&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dist&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build --watch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type-check&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vue-tsc --noEmit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;prepublishOnly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pnpm build &amp;&amp; pnpm type-check&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;peerDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^3.5.23&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;devDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;typescript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^5.9.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^7.1.5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vite-plugin-dts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^4.5.4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^3.5.23&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vue-tsc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^3.0.7&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;publishConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;access&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="📦-基础信息配置" tabindex="-1">📦 基础信息配置 <a class="header-anchor" href="#📦-基础信息配置" aria-label="Permalink to &quot;📦 基础信息配置&quot;">​</a></h3><h4 id="name" tabindex="-1"><code>name</code> <a class="header-anchor" href="#name" aria-label="Permalink to &quot;\`name\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@iswangh/element-plus-kit-core&quot;</span></span></code></pre></div><p><strong>作用</strong>：定义包的唯一标识符，用于 npm 安装和导入。</p><p><strong>说明</strong>：</p><ul><li>使用 <strong>scoped package</strong> 命名（<code>@iswangh/</code> 前缀），避免命名冲突</li><li>遵循 Monorepo 命名规范：<code>@组织名/项目名/包名</code></li><li>在项目内部，其他包可以通过 <code>@iswangh/element-plus-kit-core</code> 引用此包</li></ul><hr><h4 id="type" tabindex="-1"><code>type</code> <a class="header-anchor" href="#type" aria-label="Permalink to &quot;\`type\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span></span></code></pre></div><p><strong>作用</strong>：指定包使用 ES Module（ESM）格式，而不是 CommonJS（CJS）。</p><p><strong>说明</strong>：</p><ul><li><code>&quot;module&quot;</code>：使用 ES Module 语法（<code>import</code>/<code>export</code>）</li><li>此配置影响 Node.js 如何解析 <code>.js</code> 文件</li><li>现代 JavaScript 标准，更好的 Tree Shaking 支持</li></ul><hr><h4 id="version" tabindex="-1"><code>version</code> <a class="header-anchor" href="#version" aria-label="Permalink to &quot;\`version\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.1.0&quot;</span></span></code></pre></div><p><strong>作用</strong>：定义包的版本号，遵循 <a href="https://semver.org/" target="_blank" rel="noreferrer">语义化版本（SemVer）</a> 规范。</p><p><strong>版本格式</strong>：<code>主版本号.次版本号.修订号</code></p><ul><li><strong>主版本号（0）</strong>：不兼容的 API 修改</li><li><strong>次版本号（1）</strong>：向下兼容的功能性新增</li><li><strong>修订号（0）</strong>：向下兼容的问题修正</li></ul><hr><h3 id="📤-导出配置" tabindex="-1">📤 导出配置 <a class="header-anchor" href="#📤-导出配置" aria-label="Permalink to &quot;📤 导出配置&quot;">​</a></h3><h4 id="exports" tabindex="-1"><code>exports</code> <a class="header-anchor" href="#exports" aria-label="Permalink to &quot;\`exports\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.d.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>作用</strong>：定义包的导出入口，这是<strong>现代 npm 包的标准配置方式</strong>（Node.js 12+ 支持）。</p><p><strong>字段说明</strong>：</p><ul><li><strong><code>&quot;.&quot;</code></strong>：主入口点，对应 <code>import pkg from &#39;@iswangh/element-plus-kit-core&#39;</code></li><li><strong><code>types</code></strong>：TypeScript 类型定义文件路径</li><li><strong><code>import</code></strong>：ES Module 导入时的入口文件</li></ul><p><strong>为什么使用 <code>exports</code></strong>：</p><ul><li>✅ <strong>更精确的控制</strong>：可以分别指定不同模块系统的入口</li><li>✅ <strong>更好的安全性</strong>：只暴露指定的文件，隐藏内部实现</li><li>✅ <strong>TypeScript 支持</strong>：通过 <code>types</code> 字段提供类型定义</li></ul><hr><h4 id="main、module、types-兼容性字段" tabindex="-1"><code>main</code>、<code>module</code>、<code>types</code>（兼容性字段） <a class="header-anchor" href="#main、module、types-兼容性字段" aria-label="Permalink to &quot;\`main\`、\`module\`、\`types\`（兼容性字段）&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.d.ts&quot;</span></span></code></pre></div><p><strong>作用</strong>：向后兼容旧版本的 Node.js 和构建工具。</p><p><strong>说明</strong>：</p><ul><li><code>main</code>：CommonJS 和旧版 Node.js 的入口点</li><li><code>module</code>：为支持 ESM 的打包器提供 ES Module 入口</li><li><code>types</code>：TypeScript 类型定义文件的路径</li></ul><p><strong>优先级</strong>：</p><ul><li>支持 <code>exports</code> 的环境：优先使用 <code>exports</code></li><li>不支持 <code>exports</code> 的环境：回退到 <code>main</code>、<code>module</code>、<code>types</code></li></ul><hr><h3 id="🛠️-脚本配置" tabindex="-1">🛠️ 脚本配置 <a class="header-anchor" href="#🛠️-脚本配置" aria-label="Permalink to &quot;🛠️ 脚本配置&quot;">​</a></h3><h4 id="scripts" tabindex="-1"><code>scripts</code> <a class="header-anchor" href="#scripts" aria-label="Permalink to &quot;\`scripts\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build --watch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type-check&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vue-tsc --noEmit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;prepublishOnly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pnpm build &amp;&amp; pnpm type-check&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>脚本说明</strong>：</p><ol><li><p><strong><code>build</code></strong>：构建生产版本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div></li><li><p><strong><code>dev</code></strong>：开发模式构建，监听文件变化自动重新构建</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div></li><li><p><strong><code>type-check</code></strong>：进行 TypeScript 类型检查，不生成文件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type-check</span></span></code></pre></div></li><li><p><strong><code>prepublishOnly</code></strong>：发布前的自动检查脚本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 此脚本会在 npm publish 前自动执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type-check</span></span></code></pre></div><p><strong>作用</strong>：</p><ul><li>在发布到 npm 之前自动执行</li><li>确保构建和类型检查都通过</li><li>如果构建或类型检查失败，发布会被阻止</li><li>保证发布到 npm 的包质量</li></ul></li></ol><hr><h3 id="🔗-依赖配置" tabindex="-1">🔗 依赖配置 <a class="header-anchor" href="#🔗-依赖配置" aria-label="Permalink to &quot;🔗 依赖配置&quot;">​</a></h3><h4 id="peerdependencies" tabindex="-1"><code>peerDependencies</code> <a class="header-anchor" href="#peerdependencies" aria-label="Permalink to &quot;\`peerDependencies\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;peerDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^3.5.23&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>作用</strong>：声明包的<strong>对等依赖</strong>，即使用此包的项目必须安装的依赖。</p><p><strong>说明</strong>：</p><ul><li><strong>不自动安装</strong>：npm/pnpm 不会自动安装 peer dependencies</li><li><strong>版本要求</strong>：<code>^3.5.23</code> 表示兼容 3.5.23 及以上、4.0.0 以下的版本</li><li><strong>避免重复安装</strong>：确保项目中只有一个 Vue 实例</li></ul><hr><h4 id="devdependencies" tabindex="-1"><code>devDependencies</code> <a class="header-anchor" href="#devdependencies" aria-label="Permalink to &quot;\`devDependencies\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;devDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;typescript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^5.9.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;vite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^7.1.5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^3.5.23&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;vue-tsc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^3.0.7&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>作用</strong>：声明<strong>开发时依赖</strong>，只在开发、构建、测试时需要，不会被打包发布。</p><p><strong>依赖说明</strong>：</p><ul><li><strong><code>typescript</code></strong>：TypeScript 编译器，用于类型检查和编译</li><li><strong><code>vite</code></strong>：现代前端构建工具，用于构建和打包</li><li><strong><code>vue</code></strong>：Vue 3 框架（开发版本），用于类型定义和测试</li><li><strong><code>vue-tsc</code></strong>：Vue 3 的 TypeScript 类型检查工具，用于检查 <code>.vue</code> 文件</li></ul><hr><h2 id="tsconfig-json-配置详解" tabindex="-1">tsconfig.json 配置详解 <a class="header-anchor" href="#tsconfig-json-配置详解" aria-label="Permalink to &quot;tsconfig.json 配置详解&quot;">​</a></h2><h3 id="📋-完整配置-1" tabindex="-1">📋 完整配置 <a class="header-anchor" href="#📋-完整配置-1" aria-label="Permalink to &quot;📋 完整配置&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;extends&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../../tsconfig.app.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;composite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;tsBuildInfoFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../../node_modules/.tmp/packages-core.tsbuildinfo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ES2022&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOM&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;rootDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ESNext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;moduleResolution&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bundler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;paths&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;resolvePackageJsonExports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;allowImportingTsExtensions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;noEmit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;outDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;skipLibCheck&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exclude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_modules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="🔧-配置继承" tabindex="-1">🔧 配置继承 <a class="header-anchor" href="#🔧-配置继承" aria-label="Permalink to &quot;🔧 配置继承&quot;">​</a></h3><h4 id="extends" tabindex="-1"><code>extends</code> <a class="header-anchor" href="#extends" aria-label="Permalink to &quot;\`extends\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;extends&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../../tsconfig.app.json&quot;</span></span></code></pre></div><p><strong>作用</strong>：继承根目录的基础 TypeScript 配置。</p><p><strong>说明</strong>：</p><ul><li>复用公共配置，避免重复</li><li>基础配置定义在 <code>tsconfig.app.json</code> 中</li><li>当前配置会覆盖或扩展基础配置</li></ul><p><strong>基础配置包含</strong>：</p><ul><li>Vue 3 相关配置</li><li>模块解析策略</li><li>路径别名配置</li></ul><hr><h3 id="⚙️-编译器选项" tabindex="-1">⚙️ 编译器选项 <a class="header-anchor" href="#⚙️-编译器选项" aria-label="Permalink to &quot;⚙️ 编译器选项&quot;">​</a></h3><h4 id="composite" tabindex="-1"><code>composite</code> <a class="header-anchor" href="#composite" aria-label="Permalink to &quot;\`composite\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;composite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p><strong>作用</strong>：启用 TypeScript 项目引用（Project References）功能。</p><p><strong>说明</strong>：</p><ul><li>启用后，TypeScript 会生成 <code>.tsbuildinfo</code> 文件用于增量编译</li><li>支持 Monorepo 中多个包之间的类型引用</li><li>提升大型项目的编译性能</li></ul><p><strong>使用场景</strong>：</p><ul><li>Monorepo 项目结构</li><li>需要包之间类型共享</li><li>需要增量编译优化</li></ul><hr><h4 id="tsbuildinfofile" tabindex="-1"><code>tsBuildInfoFile</code> <a class="header-anchor" href="#tsbuildinfofile" aria-label="Permalink to &quot;\`tsBuildInfoFile\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tsBuildInfoFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../../node_modules/.tmp/packages-core.tsbuildinfo&quot;</span></span></code></pre></div><p><strong>作用</strong>：指定 TypeScript 增量编译信息文件的存储路径。</p><p><strong>说明</strong>：</p><ul><li>存储上次编译的信息，用于增量编译</li><li>路径指向根目录的临时文件夹</li><li>不应提交到版本控制（已在 <code>.gitignore</code> 中）</li></ul><p><strong>文件作用</strong>：</p><ul><li>记录上次编译的文件和依赖关系</li><li>只重新编译变更的文件</li><li>大幅提升编译速度</li></ul><hr><h4 id="lib" tabindex="-1"><code>lib</code> <a class="header-anchor" href="#lib" aria-label="Permalink to &quot;\`lib\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ES2022&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOM&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>作用</strong>：指定 TypeScript 包含的库定义文件。</p><p><strong>说明</strong>：</p><ul><li><strong><code>ES2022</code></strong>：包含 ES2022 标准的类型定义 <ul><li>ES2022 新特性包括：顶层 await、类字段、私有方法、静态块等</li><li>相比 ES2020，增加了更多现代 JavaScript 特性支持</li><li>具有良好的浏览器和 Node.js 支持</li></ul></li><li><strong><code>DOM</code></strong>：包含浏览器 DOM API 的类型定义（如 <code>document</code>、<code>window</code> 等）</li></ul><p><strong>为什么使用 ES2022</strong>：</p><ul><li>✅ 支持更多现代 JavaScript 特性</li><li>✅ 良好的浏览器兼容性（现代浏览器都支持）</li><li>✅ 构建工具（Vite）会处理兼容性，最终输出兼容目标环境</li></ul><p><strong>为什么需要 DOM</strong>：</p><ul><li>虽然 core 包不直接操作 DOM，但可能被浏览器环境使用</li><li>确保类型定义的完整性</li></ul><p><strong>ES 版本说明</strong>：</p><ul><li>ES2020：2020 年发布，包含可选链、空值合并等</li><li>ES2021：2021 年发布，包含逻辑赋值运算符等</li><li>ES2022：2022 年发布，包含顶层 await、类字段等（当前使用）</li><li>ES2023：2023 年发布，包含数组查找方法等</li><li>ES2024/ES2025：更新的版本，但浏览器支持可能不够广泛</li></ul><hr><h4 id="rootdir" tabindex="-1"><code>rootDir</code> <a class="header-anchor" href="#rootdir" aria-label="Permalink to &quot;\`rootDir\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;rootDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src&quot;</span></span></code></pre></div><p><strong>作用</strong>：指定输入文件的根目录。</p><p><strong>说明</strong>：</p><ul><li>所有源文件必须在此目录下</li><li>TypeScript 会保持目录结构到输出目录</li><li>确保输出目录结构与源代码一致</li></ul><p><strong>示例</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>  index.ts          → dist/index.js</span></span>
<span class="line"><span>  utils/</span></span>
<span class="line"><span>    checkCondition.ts → dist/utils/checkCondition.js</span></span></code></pre></div><hr><h4 id="module" tabindex="-1"><code>module</code> <a class="header-anchor" href="#module" aria-label="Permalink to &quot;\`module\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ESNext&quot;</span></span></code></pre></div><p><strong>作用</strong>：指定生成的模块系统。</p><p><strong>说明</strong>：</p><ul><li><strong><code>ESNext</code></strong>：使用最新的 ES Module 语法</li><li>支持 <code>import</code>/<code>export</code> 语法</li><li>与 <code>moduleResolution: &quot;bundler&quot;</code> 配合使用</li></ul><p><strong>为什么使用 ESNext</strong>：</p><ul><li>✅ 现代 JavaScript 标准</li><li>✅ 更好的 Tree Shaking 支持</li><li>✅ 与 Vite 等现代构建工具兼容</li></ul><hr><h4 id="moduleresolution" tabindex="-1"><code>moduleResolution</code> <a class="header-anchor" href="#moduleresolution" aria-label="Permalink to &quot;\`moduleResolution\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;moduleResolution&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bundler&quot;</span></span></code></pre></div><p><strong>作用</strong>：指定模块解析策略。</p><p><strong>说明</strong>：</p><ul><li><strong><code>bundler</code></strong>：适用于使用打包工具（如 Vite、Webpack）的项目</li><li>支持 <code>package.json</code> 的 <code>exports</code> 字段</li><li>支持条件导出（conditional exports）</li></ul><p><strong>为什么使用 bundler</strong>：</p><ul><li>✅ 支持 <code>package.json</code> 的 <code>exports</code> 字段</li><li>✅ 与 Vite 等现代构建工具兼容</li><li>✅ 更好的类型解析</li></ul><p><strong>注意</strong>：<code>moduleResolution: &quot;bundler&quot;</code> 需要 <code>module: &quot;ESNext&quot;</code> 或更高版本。</p><hr><h4 id="paths" tabindex="-1"><code>paths</code> <a class="header-anchor" href="#paths" aria-label="Permalink to &quot;\`paths\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;paths&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span></code></pre></div><p><strong>作用</strong>：覆盖继承的路径别名配置，使用包名导入。</p><p><strong>说明</strong>：</p><ul><li>设置为空对象 <code>{}</code> 以覆盖 <code>tsconfig.app.json</code> 中的 <code>paths</code> 配置</li><li>强制使用包名导入而不是路径别名</li><li>确保 TypeScript 通过 <code>package.json</code> 的 <code>exports</code> 字段解析类型</li></ul><p><strong>为什么设置为空对象</strong>：</p><ul><li>✅ <strong>使用包名导入</strong>：在 Monorepo 中，应该使用包名而不是路径别名</li><li>✅ <strong>pnpm workspace 自动解析</strong>：pnpm workspace 会自动将包名解析到工作区内的源码</li><li>✅ <strong>与发布后一致</strong>：使用包名导入，开发环境和发布后的使用方式完全一致</li><li>✅ <strong>更好的类型推断</strong>：TypeScript 可以通过 <code>package.json</code> 的 <code>exports</code> 字段正确解析类型</li></ul><hr><h4 id="resolvepackagejsonexports" tabindex="-1"><code>resolvePackageJsonExports</code> <a class="header-anchor" href="#resolvepackagejsonexports" aria-label="Permalink to &quot;\`resolvePackageJsonExports\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resolvePackageJsonExports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p><strong>作用</strong>：启用 <code>package.json</code> 的 <code>exports</code> 字段解析。</p><p><strong>说明</strong>：</p><ul><li>启用后，TypeScript 会优先使用 <code>package.json</code> 的 <code>exports</code> 字段解析模块</li><li>支持条件导出（如 <code>exports.types</code>、<code>exports.import</code>）</li><li>与 <code>moduleResolution: &quot;bundler&quot;</code> 配合使用</li></ul><p><strong>为什么启用</strong>：</p><ul><li>✅ 支持现代包导出规范</li><li>✅ 更好的类型解析</li><li>✅ 与发布后的包结构一致</li></ul><hr><h4 id="types" tabindex="-1"><code>types</code> <a class="header-anchor" href="#types" aria-label="Permalink to &quot;\`types\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>作用</strong>：指定要包含的类型定义包。</p><p><strong>说明</strong>：</p><ul><li><strong><code>node</code></strong>：包含 Node.js 的类型定义（如 <code>process</code>、<code>Buffer</code> 等）</li><li>用于构建工具（Vite）中可能使用的 Node.js API</li></ul><p><strong>注意</strong>：只包含明确列出的类型包，不会自动包含 <code>@types/*</code> 包。</p><hr><h4 id="declaration" tabindex="-1"><code>declaration</code> <a class="header-anchor" href="#declaration" aria-label="Permalink to &quot;\`declaration\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;declaration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p><strong>作用</strong>：生成 <code>.d.ts</code> 类型定义文件。</p><p><strong>说明</strong>：</p><ul><li>为每个 <code>.ts</code> 文件生成对应的 <code>.d.ts</code> 文件</li><li>其他项目可以使用这些类型定义获得类型提示</li><li>发布包时必须启用</li></ul><p><strong>输出示例</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/index.ts → dist/index.d.ts</span></span></code></pre></div><hr><h4 id="declarationmap" tabindex="-1"><code>declarationMap</code> <a class="header-anchor" href="#declarationmap" aria-label="Permalink to &quot;\`declarationMap\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;declarationMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p><strong>作用</strong>：为类型定义文件生成 source map。</p><p><strong>说明</strong>：</p><ul><li>生成 <code>.d.ts.map</code> 文件</li><li>支持从类型定义跳转到源代码</li><li>提升开发体验（IDE 中可以直接跳转到源码）</li></ul><hr><h4 id="noemit" tabindex="-1"><code>noEmit</code> <a class="header-anchor" href="#noemit" aria-label="Permalink to &quot;\`noEmit\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;noEmit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><p><strong>作用</strong>：允许 TypeScript 生成输出文件。</p><p><strong>说明</strong>：</p><ul><li><code>false</code> 表示会生成 JavaScript 文件</li><li>在构建库时通常设置为 <code>false</code></li><li>在类型检查时（<code>type-check</code> 脚本）使用 <code>--noEmit</code> 标志覆盖此设置</li></ul><hr><h4 id="outdir" tabindex="-1"><code>outDir</code> <a class="header-anchor" href="#outdir" aria-label="Permalink to &quot;\`outDir\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;outDir&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist&quot;</span></span></code></pre></div><p><strong>作用</strong>：指定编译输出目录。</p><p><strong>说明</strong>：</p><ul><li>所有编译后的文件输出到此目录</li><li>与 <code>rootDir</code> 配合，保持目录结构</li><li>此目录会被发布到 npm（在 <code>files</code> 字段中指定）</li></ul><hr><h4 id="skiplibcheck" tabindex="-1"><code>skipLibCheck</code> <a class="header-anchor" href="#skiplibcheck" aria-label="Permalink to &quot;\`skipLibCheck\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;skipLibCheck&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p><strong>作用</strong>：跳过对声明文件（<code>.d.ts</code>）的类型检查。</p><p><strong>说明</strong>：</p><ul><li>跳过检查 <code>node_modules</code> 中的类型定义</li><li>大幅提升编译速度</li><li>通常可以安全启用，因为第三方库的类型定义已经验证过</li></ul><p><strong>权衡</strong>：</p><ul><li>✅ 提升编译速度</li><li>⚠️ 可能忽略第三方库的类型错误（但通常不影响使用）</li></ul><hr><h3 id="📁-文件包含与排除" tabindex="-1">📁 文件包含与排除 <a class="header-anchor" href="#📁-文件包含与排除" aria-label="Permalink to &quot;📁 文件包含与排除&quot;">​</a></h3><h4 id="include" tabindex="-1"><code>include</code> <a class="header-anchor" href="#include" aria-label="Permalink to &quot;\`include\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;include&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/**/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>作用</strong>：指定要包含在编译中的文件或目录。</p><p><strong>说明</strong>：</p><ul><li><code>src/**/*</code> 表示 <code>src</code> 目录下的所有文件</li><li>使用 glob 模式匹配文件</li><li>只编译匹配的文件</li></ul><hr><h4 id="exclude" tabindex="-1"><code>exclude</code> <a class="header-anchor" href="#exclude" aria-label="Permalink to &quot;\`exclude\`&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exclude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_modules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>作用</strong>：指定要排除在编译之外的文件或目录。</p><p><strong>说明</strong>：</p><ul><li><strong><code>node_modules</code></strong>：排除依赖包</li><li><strong><code>dist</code></strong>：排除构建输出目录</li><li>即使匹配 <code>include</code>，也会被排除</li></ul><hr><h2 id="vite-config-ts-配置详解" tabindex="-1">vite.config.ts 配置详解 <a class="header-anchor" href="#vite-config-ts-配置详解" aria-label="Permalink to &quot;vite.config.ts 配置详解&quot;">​</a></h2><h3 id="📋-完整配置-2" tabindex="-1">📋 完整配置 <a class="header-anchor" href="#📋-完整配置-2" aria-label="Permalink to &quot;📋 完整配置&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { resolve } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:path&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:url&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite-plugin-dts&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __dirname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Core 包构建配置</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 核心工具函数包，不依赖 Vue 组件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    dts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      include: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      exclude: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*.test.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*.spec.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      outDir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      copyDtsFiles: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      logLevel: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;silent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lib: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      entry: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/index.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ElementPlusKitCore&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fileName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;index&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      formats: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;es&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      external: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        globals: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          vue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="📦-导入说明" tabindex="-1">📦 导入说明 <a class="header-anchor" href="#📦-导入说明" aria-label="Permalink to &quot;📦 导入说明&quot;">​</a></h3><h4 id="路径解析工具" tabindex="-1">路径解析工具 <a class="header-anchor" href="#路径解析工具" aria-label="Permalink to &quot;路径解析工具&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { resolve } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:path&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:url&#39;</span></span></code></pre></div><p><strong>作用</strong>：在 ES Module 环境中获取当前文件目录。</p><p><strong>说明</strong>：</p><ul><li><code>fileURLToPath</code>：将 <code>file://</code> URL 转换为文件路径</li><li><code>import.meta.url</code>：当前模块的 URL</li><li><code>new URL(&#39;.&#39;, import.meta.url)</code>：获取当前目录的 URL</li><li>最终得到 <code>__dirname</code> 变量（类似 CommonJS 的 <code>__dirname</code>）</li></ul><p><strong>为什么需要</strong>：</p><ul><li>ES Module 中没有 <code>__dirname</code> 和 <code>__filename</code></li><li>需要使用 <code>import.meta.url</code> 和 <code>fileURLToPath</code> 来获取</li></ul><hr><h4 id="配置定义函数" tabindex="-1">配置定义函数 <a class="header-anchor" href="#配置定义函数" aria-label="Permalink to &quot;配置定义函数&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span></code></pre></div><p><strong>作用</strong>：提供类型提示和配置验证。</p><p><strong>说明</strong>：</p><ul><li>提供完整的 TypeScript 类型提示</li><li>在配置错误时给出提示</li><li>支持配置的智能补全</li></ul><hr><h4 id="typescript-类型定义插件" tabindex="-1">TypeScript 类型定义插件 <a class="header-anchor" href="#typescript-类型定义插件" aria-label="Permalink to &quot;TypeScript 类型定义插件&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite-plugin-dts&#39;</span></span></code></pre></div><p><strong>作用</strong>：自动生成 TypeScript 类型定义文件（<code>.d.ts</code>）。</p><p><strong>说明</strong>：</p><ul><li><code>vite-plugin-dts</code>：Vite 插件，用于生成类型定义文件</li><li>构建时自动为每个 TypeScript 文件生成对应的 <code>.d.ts</code> 文件</li><li>确保发布的包包含完整的类型定义</li></ul><p><strong>插件配置</strong>：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  include: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exclude: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*.test.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*.spec.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  outDir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  copyDtsFiles: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  logLevel: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;silent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>字段说明</strong>：</p><ul><li><code>include</code>：包含的文件模式</li><li><code>exclude</code>：排除的文件模式（测试文件）</li><li><code>outDir</code>：输出目录，与构建输出目录一致</li><li><code>copyDtsFiles</code>：复制 <code>.d.ts</code> 文件到输出目录</li><li><code>logLevel</code>：日志级别，<code>silent</code> 表示不输出日志</li></ul><hr><h3 id="🏗️-构建配置" tabindex="-1">🏗️ 构建配置 <a class="header-anchor" href="#🏗️-构建配置" aria-label="Permalink to &quot;🏗️ 构建配置&quot;">​</a></h3><h4 id="plugins" tabindex="-1"><code>plugins</code> <a class="header-anchor" href="#plugins" aria-label="Permalink to &quot;\`plugins\`&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    include: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    exclude: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*.test.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*.spec.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    outDir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    copyDtsFiles: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    logLevel: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;silent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span></code></pre></div><p><strong>作用</strong>：配置 Vite 插件。</p><p><strong>说明</strong>：</p><ul><li><strong><code>dts()</code></strong>：TypeScript 类型定义生成插件</li><li>自动生成 <code>.d.ts</code> 类型定义文件</li><li>确保发布的包包含完整的类型支持</li></ul><hr><h4 id="build-lib" tabindex="-1"><code>build.lib</code> <a class="header-anchor" href="#build-lib" aria-label="Permalink to &quot;\`build.lib\`&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  lib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/index.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ElementPlusKitCore&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;index&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    formats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;es&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>作用</strong>：配置库模式构建。</p><p><strong>字段说明</strong>：</p><ol><li><p><strong><code>entry</code></strong>：库的入口文件</p><ul><li>指向 <code>src/index.ts</code></li><li>使用 <code>resolve</code> 获取绝对路径</li></ul></li><li><p><strong><code>name</code></strong>：库的全局变量名（用于 UMD 格式）</p><ul><li>当前配置为 ES Module，此字段主要用于 UMD 格式</li><li>如果只构建 ES Module，可以省略</li></ul></li><li><p><strong><code>fileName</code></strong>：输出文件名</p><ul><li><code>&#39;index&#39;</code> 表示输出为 <code>index.js</code></li><li>可以是一个函数来自定义文件名</li></ul></li><li><p><strong><code>formats</code></strong>：构建格式</p><ul><li><code>[&#39;es&#39;]</code> 表示只构建 ES Module 格式</li><li>可选值：<code>&#39;es&#39;</code>、<code>&#39;cjs&#39;</code>、<code>&#39;umd&#39;</code>、<code>&#39;iife&#39;</code></li></ul></li></ol><p><strong>为什么只使用 ES Module</strong>：</p><ul><li>现代标准，更好的 Tree Shaking</li><li>与 <code>package.json</code> 中的 <code>&quot;type&quot;: &quot;module&quot;</code> 一致</li><li>减小包体积</li></ul><hr><h4 id="build-rollupoptions" tabindex="-1"><code>build.rollupOptions</code> <a class="header-anchor" href="#build-rollupoptions" aria-label="Permalink to &quot;\`build.rollupOptions\`&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rollupOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    globals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>作用</strong>：配置 Rollup 构建选项（Vite 使用 Rollup 进行生产构建）。</p><p><strong>字段说明</strong>：</p><ol><li><p><strong><code>external</code></strong>：外部依赖列表</p><ul><li><code>[&#39;vue&#39;]</code> 表示 Vue 不会被打包进库中</li><li>使用库的项目需要自己安装 Vue</li><li>与 <code>peerDependencies</code> 中的 <code>vue</code> 对应</li></ul></li><li><p><strong><code>output.globals</code></strong>：全局变量映射（用于 UMD 格式）</p><ul><li><code>vue: &#39;Vue&#39;</code> 表示在 UMD 格式中，Vue 通过全局变量 <code>Vue</code> 访问</li><li>当前配置为 ES Module，此字段主要用于 UMD 格式</li></ul></li></ol><p><strong>为什么将 Vue 设为外部依赖</strong>：</p><ul><li>✅ 避免重复打包，减小库体积</li><li>✅ 确保使用项目中的 Vue 版本</li><li>✅ 避免版本冲突</li></ul><hr><h3 id="🔄-配置特点" tabindex="-1">🔄 配置特点 <a class="header-anchor" href="#🔄-配置特点" aria-label="Permalink to &quot;🔄 配置特点&quot;">​</a></h3><h4 id="_1-库模式构建" tabindex="-1">1. 库模式构建 <a class="header-anchor" href="#_1-库模式构建" aria-label="Permalink to &quot;1. 库模式构建&quot;">​</a></h4><ul><li>使用 <code>build.lib</code> 配置库模式</li><li>输出为 ES Module 格式</li><li>适合发布到 npm</li></ul><h4 id="_2-外部依赖处理" tabindex="-1">2. 外部依赖处理 <a class="header-anchor" href="#_2-外部依赖处理" aria-label="Permalink to &quot;2. 外部依赖处理&quot;">​</a></h4><ul><li>Vue 作为外部依赖，不打包进库</li><li>与 <code>peerDependencies</code> 保持一致</li><li>减小库体积</li></ul><h4 id="_3-插件配置" tabindex="-1">3. 插件配置 <a class="header-anchor" href="#_3-插件配置" aria-label="Permalink to &quot;3. 插件配置&quot;">​</a></h4><ul><li>Core 包不包含 Vue 组件，不需要 <code>@vitejs/plugin-vue</code></li><li>使用 <code>vite-plugin-dts</code> 插件生成类型定义文件</li><li>纯 TypeScript 工具函数包</li></ul><hr><h2 id="配置文件之间的关系" tabindex="-1">配置文件之间的关系 <a class="header-anchor" href="#配置文件之间的关系" aria-label="Permalink to &quot;配置文件之间的关系&quot;">​</a></h2><h3 id="🔗-配置关联图" tabindex="-1">🔗 配置关联图 <a class="header-anchor" href="#🔗-配置关联图" aria-label="Permalink to &quot;🔗 配置关联图&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>package.json</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    ├─ type: &quot;module&quot; ──────────────┐</span></span>
<span class="line"><span>    │                                │</span></span>
<span class="line"><span>    ├─ exports.import ───────────────┤</span></span>
<span class="line"><span>    │                                │</span></span>
<span class="line"><span>    └─ scripts.build ─────────────────┤</span></span>
<span class="line"><span>                                     │</span></span>
<span class="line"><span>vite.config.ts ──────────────────────┼─ 构建配置</span></span>
<span class="line"><span>    │                                │</span></span>
<span class="line"><span>    ├─ build.lib.formats: [&#39;es&#39;] ────┘</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    └─ build.rollupOptions.external ─┐</span></span>
<span class="line"><span>                                      │</span></span>
<span class="line"><span>tsconfig.json ────────────────────────┼─ 类型配置</span></span>
<span class="line"><span>    │                                 │</span></span>
<span class="line"><span>    ├─ outDir: &quot;./dist&quot; ──────────────┘</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    └─ declaration: true ────────────┐</span></span>
<span class="line"><span>                                      │</span></span>
<span class="line"><span>package.json ──────────────────────────┘</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    └─ exports.types: &quot;./dist/index.d.ts&quot;</span></span></code></pre></div><h3 id="📝-配置一致性" tabindex="-1">📝 配置一致性 <a class="header-anchor" href="#📝-配置一致性" aria-label="Permalink to &quot;📝 配置一致性&quot;">​</a></h3><h4 id="_1-输出目录" tabindex="-1">1. 输出目录 <a class="header-anchor" href="#_1-输出目录" aria-label="Permalink to &quot;1. 输出目录&quot;">​</a></h4><ul><li><strong><code>tsconfig.json</code></strong>：<code>outDir: &quot;./dist&quot;</code></li><li><strong><code>vite.config.ts</code></strong>：默认输出到 <code>dist/</code></li><li><strong><code>package.json</code></strong>：<code>exports.import: &quot;./dist/index.js&quot;</code></li></ul><p><strong>一致性</strong>：所有配置都指向 <code>dist/</code> 目录。</p><hr><h4 id="_2-模块格式" tabindex="-1">2. 模块格式 <a class="header-anchor" href="#_2-模块格式" aria-label="Permalink to &quot;2. 模块格式&quot;">​</a></h4><ul><li><strong><code>package.json</code></strong>：<code>type: &quot;module&quot;</code> + <code>exports.import</code></li><li><strong><code>vite.config.ts</code></strong>：<code>formats: [&#39;es&#39;]</code></li><li><strong><code>tsconfig.json</code></strong>：继承基础配置（ES Module）</li></ul><p><strong>一致性</strong>：统一使用 ES Module 格式。</p><hr><h4 id="_3-外部依赖" tabindex="-1">3. 外部依赖 <a class="header-anchor" href="#_3-外部依赖" aria-label="Permalink to &quot;3. 外部依赖&quot;">​</a></h4><ul><li><strong><code>package.json</code></strong>：<code>peerDependencies: { vue: &quot;^3.5.23&quot; }</code></li><li><strong><code>vite.config.ts</code></strong>：<code>external: [&#39;vue&#39;]</code></li></ul><p><strong>一致性</strong>：Vue 作为外部依赖，不打包进库。</p><hr><h4 id="_4-类型定义" tabindex="-1">4. 类型定义 <a class="header-anchor" href="#_4-类型定义" aria-label="Permalink to &quot;4. 类型定义&quot;">​</a></h4><ul><li><strong><code>tsconfig.json</code></strong>：<code>declaration: true</code> + <code>outDir: &quot;./dist&quot;</code></li><li><strong><code>package.json</code></strong>：<code>exports.types: &quot;./dist/index.d.ts&quot;</code></li></ul><p><strong>一致性</strong>：类型定义文件与 JavaScript 文件一起生成和导出。</p><hr><h2 id="开发工作流" tabindex="-1">开发工作流 <a class="header-anchor" href="#开发工作流" aria-label="Permalink to &quot;开发工作流&quot;">​</a></h2><h3 id="🚀-开发流程" tabindex="-1">🚀 开发流程 <a class="header-anchor" href="#🚀-开发流程" aria-label="Permalink to &quot;🚀 开发流程&quot;">​</a></h3><h4 id="_1-开发阶段" tabindex="-1">1. 开发阶段 <a class="header-anchor" href="#_1-开发阶段" aria-label="Permalink to &quot;1. 开发阶段&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动监听模式，自动重新构建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p><strong>流程</strong>：</p><ol><li>修改 <code>src/</code> 目录下的源代码</li><li>Vite 自动检测变化并重新构建</li><li>输出到 <code>dist/</code> 目录</li><li>其他包可以立即使用更新后的代码</li></ol><hr><h4 id="_2-类型检查" tabindex="-1">2. 类型检查 <a class="header-anchor" href="#_2-类型检查" aria-label="Permalink to &quot;2. 类型检查&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查类型错误</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type-check</span></span></code></pre></div><p><strong>流程</strong>：</p><ol><li>使用 <code>vue-tsc</code> 检查所有 TypeScript 文件</li><li>不生成输出文件（<code>--noEmit</code>）</li><li>发现类型错误时停止并报告</li></ol><p><strong>使用场景</strong>：</p><ul><li>提交代码前检查</li><li>CI/CD 流程中验证</li><li>确保代码质量</li></ul><hr><h4 id="_3-构建生产版本" tabindex="-1">3. 构建生产版本 <a class="header-anchor" href="#_3-构建生产版本" aria-label="Permalink to &quot;3. 构建生产版本&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构建生产版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p><strong>流程</strong>：</p><ol><li>Vite 使用 Rollup 进行构建</li><li>TypeScript 编译生成 JavaScript 和类型定义</li><li>输出到 <code>dist/</code> 目录</li><li>准备发布到 npm</li></ol><hr><h3 id="📦-发布流程" tabindex="-1">📦 发布流程 <a class="header-anchor" href="#📦-发布流程" aria-label="Permalink to &quot;📦 发布流程&quot;">​</a></h3><h4 id="_1-构建和类型检查" tabindex="-1">1. 构建和类型检查 <a class="header-anchor" href="#_1-构建和类型检查" aria-label="Permalink to &quot;1. 构建和类型检查&quot;">​</a></h4><p>发布前会自动执行 <code>prepublishOnly</code> 脚本：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> publish</span></span></code></pre></div><p><strong>自动执行</strong>：</p><ol><li><code>pnpm build</code> - 构建生产版本</li><li><code>pnpm type-check</code> - 类型检查</li><li>如果构建或类型检查失败，发布会被阻止</li></ol><p><strong>手动执行</strong>（可选）：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 手动构建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 手动类型检查</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type-check</span></span></code></pre></div><h4 id="_2-发布" tabindex="-1">2. 发布 <a class="header-anchor" href="#_2-发布" aria-label="Permalink to &quot;2. 发布&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> publish</span></span></code></pre></div><p><strong>发布内容</strong>：</p><ul><li><code>dist/</code> 目录（构建产物）</li><li><code>README.md</code>（文档）</li><li><code>package.json</code>（配置）</li></ul><hr><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="q1-为什么-tsconfig-json-中-noemit-false-但-type-check-脚本使用-noemit" tabindex="-1">Q1: 为什么 <code>tsconfig.json</code> 中 <code>noEmit: false</code>，但 <code>type-check</code> 脚本使用 <code>--noEmit</code>？ <a class="header-anchor" href="#q1-为什么-tsconfig-json-中-noemit-false-但-type-check-脚本使用-noemit" aria-label="Permalink to &quot;Q1: 为什么 \`tsconfig.json\` 中 \`noEmit: false\`，但 \`type-check\` 脚本使用 \`--noEmit\`？&quot;">​</a></h3><p><strong>A</strong>:</p><ul><li><code>tsconfig.json</code> 中的 <code>noEmit: false</code> 允许构建时生成文件</li><li><code>type-check</code> 脚本使用 <code>--noEmit</code> 标志覆盖配置，只检查类型不生成文件</li><li>这样可以在不同场景下使用不同的行为</li></ul><hr><h3 id="q2-为什么-vite-config-ts-中只配置了-dts-插件-没有配置-vue-插件" tabindex="-1">Q2: 为什么 <code>vite.config.ts</code> 中只配置了 <code>dts</code> 插件，没有配置 <code>vue</code> 插件？ <a class="header-anchor" href="#q2-为什么-vite-config-ts-中只配置了-dts-插件-没有配置-vue-插件" aria-label="Permalink to &quot;Q2: 为什么 \`vite.config.ts\` 中只配置了 \`dts\` 插件，没有配置 \`vue\` 插件？&quot;">​</a></h3><p><strong>A</strong>:</p><ul><li>Core 包是纯 TypeScript 工具函数包</li><li>不包含 Vue 组件（<code>.vue</code> 文件）</li><li>不需要 <code>@vitejs/plugin-vue</code> 插件</li><li>只需要 <code>vite-plugin-dts</code> 插件来生成类型定义文件</li><li>只有包含 Vue 组件的包（如 form 包）才需要配置 <code>vue</code> 插件</li></ul><hr><h3 id="q3-tsbuildinfofile-文件应该提交到-git-吗" tabindex="-1">Q3: <code>tsBuildInfoFile</code> 文件应该提交到 Git 吗？ <a class="header-anchor" href="#q3-tsbuildinfofile-文件应该提交到-git-吗" aria-label="Permalink to &quot;Q3: \`tsBuildInfoFile\` 文件应该提交到 Git 吗？&quot;">​</a></h3><p><strong>A</strong>:</p><ul><li><strong>不应该</strong>提交</li><li>这是增量编译的临时文件</li><li>应该在 <code>.gitignore</code> 中忽略</li><li>每个开发者本地生成</li></ul><hr><h3 id="q4-为什么-external-中只包含-vue-不包含其他依赖" tabindex="-1">Q4: 为什么 <code>external</code> 中只包含 <code>vue</code>，不包含其他依赖？ <a class="header-anchor" href="#q4-为什么-external-中只包含-vue-不包含其他依赖" aria-label="Permalink to &quot;Q4: 为什么 \`external\` 中只包含 \`vue\`，不包含其他依赖？&quot;">​</a></h3><p><strong>A</strong>:</p><ul><li>Core 包只依赖 Vue（在 <code>peerDependencies</code> 中声明）</li><li>没有其他运行时依赖</li><li>所有工具函数都是纯函数，不依赖外部库</li></ul><hr><h3 id="q5-如何添加新的导出入口" tabindex="-1">Q5: 如何添加新的导出入口？ <a class="header-anchor" href="#q5-如何添加新的导出入口" aria-label="Permalink to &quot;Q5: 如何添加新的导出入口？&quot;">​</a></h3><p><strong>A</strong>:</p><ol><li><strong>修改 <code>package.json</code></strong>：</li></ol><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.d.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;./utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/utils.d.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/utils.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="2"><li><strong>修改 <code>vite.config.ts</code></strong>（如果需要单独构建）：</li></ol><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  lib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/index.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      utils</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/utils/index.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="q6-如何调试构建问题" tabindex="-1">Q6: 如何调试构建问题？ <a class="header-anchor" href="#q6-如何调试构建问题" aria-label="Permalink to &quot;Q6: 如何调试构建问题？&quot;">​</a></h3><p><strong>A</strong>:</p><ol><li><strong>检查 TypeScript 配置</strong>：</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type-check</span></span></code></pre></div><ol start="2"><li><strong>检查构建输出</strong>：</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看 dist/ 目录</span></span></code></pre></div><ol start="3"><li><strong>检查 Vite 配置</strong>：</li></ol><ul><li>查看 <code>vite.config.ts</code> 中的配置</li><li>确认路径解析正确</li></ul><ol start="4"><li><strong>查看构建日志</strong>：</li></ol><ul><li>Vite 会输出详细的构建信息</li><li>检查是否有警告或错误</li></ul><hr><h2 id="📚-相关资源" tabindex="-1">📚 相关资源 <a class="header-anchor" href="#📚-相关资源" aria-label="Permalink to &quot;📚 相关资源&quot;">​</a></h2><ul><li><a href="https://docs.npmjs.com/cli/v9/configuring-npm/package-json" target="_blank" rel="noreferrer">npm package.json 官方文档</a></li><li><a href="https://www.typescriptlang.org/tsconfig" target="_blank" rel="noreferrer">TypeScript 配置文档</a></li><li><a href="https://vitejs.dev/config/" target="_blank" rel="noreferrer">Vite 构建配置</a></li><li><a href="https://nodejs.org/api/packages.html#package-entry-points" target="_blank" rel="noreferrer">Node.js Package Exports</a></li><li><a href="https://semver.org/" target="_blank" rel="noreferrer">语义化版本规范</a></li></ul><hr><h2 id="📄-更新日志" tabindex="-1">📄 更新日志 <a class="header-anchor" href="#📄-更新日志" aria-label="Permalink to &quot;📄 更新日志&quot;">​</a></h2><ul><li><strong>2024-XX-XX</strong>：初始版本，包含完整开发配置说明</li><li><strong>2024-XX-XX</strong>：更新 Vue 版本到 3.5.23</li></ul><hr><p><strong>文档维护者</strong>：Element Plus Kit 团队<br><strong>最后更新</strong>：2024年</p>`,353)])])}const g=i(l,[["render",e]]);export{c as __pageData,g as default};
