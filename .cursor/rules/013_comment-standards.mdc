---
description: 注释编写规范
globs: 
alwaysApply: true
priority: 2
tags:
  - comment
  - documentation
---

# 注释编写规范

> **⚠️ 强制要求 - 请勿忽略**
>
> 本文档定义了代码注释的编写规范，所有代码必须严格遵循。

> **注意**：导出规范请参考 `017_architecture-standards.mdc`

## JSDoc 标准

- 当变量、函数、类、接口的类型定义需要说明时，使用 JSDoc 格式进行注释
- 遵循"注释编写原则"中的必要性原则（参考"注释编写原则"章节）
- 优先使用 TypeScript 类型系统表达意图，类型系统无法表达时再使用注释补充说明
- 所有对外暴露的公共 API（导出的函数、类、接口、类型等）必须提供完整的 JSDoc 注释

## 注释类型与格式

- 文件开头使用 `@file` 标签说明文件用途和相关信息
- 当注释仅包含标题时，使用 `/** xxx */` 单行格式
- 当需要添加描述说明时，使用多行 JSDoc 格式
- 当函数有参数或返回值时，必须使用 `@param` 和 `@returns` 标签（格式：`@param {类型} 参数名 - 参数描述`，`@returns {类型} 返回值描述`）
- 类定义必须包含类的作用、主要方法和使用示例
- Interface 和 Type 定义必须使用 JSDoc 格式
- 枚举定义必须包含枚举的用途说明，每个枚举值应添加注释
- 函数内部逻辑说明使用 `//` 单行注释格式，注释应放在被注释代码的上方
- 禁止在代码行尾添加注释，除非是极短的说明（如 `// TODO`）
- TODO 和 FIXME 注释必须包含作者、日期和具体说明，格式：`// TODO(作者名, YYYY-MM-DD): 说明`
- 标记废弃的 API 时，必须使用 `@deprecated` 标签并说明替代方案

## 注释编写原则

- 必要性原则：代码本身能表达清楚的逻辑，优先简化注释而非删除；优先通过良好的命名和代码结构表达意图；只有当注释完全冗余（仅重复代码本身已表达的信息）时才删除；如果注释提供了额外的上下文、说明或重要信息，应保留但简化
- 注释内容必须与代码实现保持一致
- 修改代码时同步更新相关注释
- 注释简洁明了，避免冗余，优先简化而非删除
- 公共 API 的注释必须完整，包括用途、参数、返回值、异常、示例等
- 禁止使用注释来"注释掉"代码，应直接删除不需要的代码
- 禁止在注释中重复代码本身已经表达的信息，但应简化而非直接删除

## 注释优先级

- 高优先级（必须注释）：公共 API、复杂的业务逻辑和算法、非显而易见的实现细节、性能优化和特殊处理
- 中优先级（建议注释）：工具函数和辅助方法、配置项和常量、类型定义和接口
- 低优先级（可选注释）：简单的 getter/setter 方法、自解释的代码、临时变量和局部变量

## 注释与类型系统

- 优先使用 TypeScript 类型系统表达意图，类型系统无法表达时再使用注释
- JSDoc 中的类型注解应与 TypeScript 类型定义保持一致
- 如果 TypeScript 类型已经足够清晰，JSDoc 中可以不重复类型信息
