---
description: MDC 文件生成和管理规范
globs: 
alwaysApply: true
priority: 1  # 最高优先级，确保规则被优先执行
tags:
  - mandatory  # 标记为强制要求
  - critical   # 标记为关键要求
  - mdc  # 标记为 MDC 相关
---

# MDC 文件生成和管理规范

> **⚠️ 强制要求 - 请勿忽略**
>
> 本文档定义了 MDC 规则文件的生成、管理和使用规范，所有规则文件必须严格遵循，不得违反或忽略。

## 目录导航

- [规则文件编号空间规范](#规则文件编号空间规范)
- [MDC 文件生成要求](#mdc-文件生成要求)
- [MDC 规则文件核心原则](#mdc-规则文件核心原则)
- [MDC 文件风格一致性规范](#mdc-文件风格一致性规范)
- [自动化响应要求](#自动化响应要求)
- [时间返回规范](#时间返回规范)

## 规则文件编号空间规范

> **⚠️ 强制要求 - 所有规则文件必须严格遵循此编号空间规范**

规则文件必须按照以下编号空间进行组织，禁止违反：

- **000**：核心总纲文件
  - 仅用于核心开发规范总纲，包含目录导航和沟通响应规范等基础规范
  - 禁止在此编号下创建其他文件

- **001-009**：AI 相关规范（10个文件空间）
  - 用于定义 AI 执行、行为、响应等相关规范
  - 当前使用：
    - `001_mdc-standards.mdc` - MDC 文件生成和管理规范
    - `002_execution-standards.mdc` - AI 行动执行规范
  - 预留空间：003-009

- **010-049**：前端开发规范（40个文件空间）
  - 用于定义前端开发相关的所有规范，包括代码质量、类型规范、代码风格、注释、工程化、测试、工具配置、架构、文档等
  - 当前使用：
    - `010_code-quality-standards.mdc` - 代码质量规范
    - `011_typescript-standards.mdc` - TypeScript 类型规范
    - `012_code-style-standards.mdc` - 代码风格规范
    - `013_comment-standards.mdc` - 注释编写规范
    - `014_engineering-standards.mdc` - 工程化实践规范
    - `015_testing-standards.mdc` - 测试、错误处理和调试诊断规范
    - `016_tool-config-standards.mdc` - 开发工具配置规范
    - `017_architecture-standards.mdc` - 项目架构规范
    - `018_documentation-standards.mdc` - 文档编写标准
    - `019_monorepo-standards.mdc` - Monorepo 开发通用规范
  - 预留空间：020-049

- **050-099**：预留扩展（50个文件空间）
  - 用于未来扩展的通用规范
  - 当前未使用

- **100+**：项目特定规范（无限扩展）
  - 用于定义项目特定的开发规范
  - 当前使用：`100_project-rules.mdc` - Element Plus Kit 项目特定开发规范
  - 可扩展：101、102、103...

**编号规范要求**：
- 所有规则文件必须使用三位数编号，格式：`{编号}_{模块名称}-standards.mdc` 或 `{编号}_{模块名称}-rules.mdc`
- 编号必须严格按照上述空间分配，禁止跨空间使用编号
- 创建新文件前，必须检查编号空间是否可用，禁止占用已使用的编号
- 文件命名必须使用英文 kebab-case，禁止使用中文或特殊字符

## MDC 文件生成要求

- 所有规则定义必须优先考虑 AI 的理解和执行能力
- 生成或修改 MDC 文件时，必须严格遵循最佳实践、简洁、明确、清晰四个标准，确保规则定义文件符合这些要求
- 生成前必须检查现有 MDC 文件（如 000、001 等）中是否已包含相同或类似的内容（必须使用 `read_file` 工具逐行逐字符读取相关文件）
- 禁止完全重复，新文件不应包含与现有文件完全相同的内容
- 对于已在现有文件中定义的内容，应使用引用而非重复描述
- 规则定义文件必须简洁、明确、可执行，无冗余说明
- 生成或修改 MDC 文件时，必须严格遵循参考说明使用原则
  - 保留参考说明：仅在避免重复定义时使用参考说明（如注释格式、文档格式、语言规范等）
  - 删除参考说明：规则本身已足够明确时，禁止添加参考说明（如目录结构、命名规范等）
  - 原则：参考说明仅用于避免重复定义，禁止在规则本身已明确的情况下添加参考说明

## MDC 规则文件核心原则

> **⚠️ 强制要求**
>
> 所有 MDC 规则文件必须严格遵循以下核心原则，禁止违反。

**核心原则**（基于 Cursor 官方文档和 AI prompt engineering 最佳实践）：

1. **清晰性**：规则应该清晰、具体且可执行
2. **简洁性**：避免冗长和复杂的描述
3. **直接性**：使用直接指令语言，而非复杂的标记系统
4. **可执行性**：提供具体示例，而非抽象描述

**MDC 文件长度限制**：

- MDC 文件绝对不能超过 500 行
- 如果超过 500 行，必须模块化抽离定义
- 在 000 规范文件中链接对应的文档，禁止重复定义已有或相同的规则

**Cursor 官方建议**：

- 规则应该"清晰、具体且可执行，避免模糊的指导"

**AI prompt engineering 最佳实践**：

- 使用直接指令语言，而非复杂的标记系统

## MDC 文件风格一致性规范

- 所有 MDC 文件必须与基础规范文件（编号为 000 的规则文件）保持风格一致
- 所有 MDC 文件必须包含 Frontmatter 配置，使用 YAML 格式
  - 必需字段：`description`、`alwaysApply`、`priority`、`tags`
  - 可选字段：`globs`
  - 格式要求：所有字段格式必须与基础规范文件保持一致

## 自动化响应要求

- 每次回答完成后，必须自动检查已修改的文件并生成提交信息（分别生成暂存区和未暂存区，遵循 Conventional Commits 格式：`<type>(<scope>): <subject>`）
- 执行中断时，必须返回当前时间并记录中断信息（任务名称、进度、继续起点）

## 时间返回规范

- 每次回答完成后，在返回最终答案前，必须执行系统命令获取当前系统时间
- 执行顺序：完成所有回答内容生成 → 执行系统命令获取当前系统时间（使用 `run_terminal_cmd` 工具）→ 将时间添加到回答内容最末尾 → 返回最终答案
- 时间获取方式：必须使用 `run_terminal_cmd` 工具执行系统命令获取当前系统时间
  - Windows：`powershell -Command "Get-Date -Format 'yyyy-MM-dd HH:mm:ss dddd'"`
  - Unix/Linux/Mac：`date '+%Y-%m-%d %H:%M:%S %A'`
  - 星期格式转换：如果获取的星期格式为英文，必须转换为中文格式（星期一至星期日）
- 时间格式：`YYYY-MM-DD HH:mm:ss 星期X`
  - 日期格式：`YYYY-MM-DD`（4位年份-2位月份-2位日期）
  - 时间格式：`HH:mm:ss`（24小时制，2位小时:2位分钟:2位秒）
  - 星期格式：必须使用中文格式（星期一至星期日），禁止使用英文或数字格式
- 位置要求：放在回答内容的最末尾，使用分隔线（`---`）与正文内容区分
- 格式要求：`---\n\n**当前时间**：YYYY-MM-DD HH:mm:ss 星期X`
- 验证要求：时间必须来自 `run_terminal_cmd` 工具的执行结果，禁止使用任何硬编码的时间值
- 错误处理：如果系统命令获取失败，必须明确说明获取失败原因和使用的命令，禁止使用猜测、默认时间或示例时间
- 错误说明格式：`---\n\n**时间获取失败**：原因说明（使用的命令：xxx）`
- 禁止使用固定时间、示例时间、猜测时间或默认时间
- 禁止在回答过程中预设时间值或使用缓存的时间
- 禁止在未执行系统命令的情况下返回时间
