---
description: 前端项目通用开发规范
globs: 
alwaysApply: true
---

# 前端项目通用开发规范

## 沟通响应规范

### 语言使用
- **始终使用简体中文**与用户进行沟通交流，确保信息传达清晰准确
- **技术术语保持英文原文**，避免翻译造成的歧义（如：API、DOM、Promise、React Hook 等）
- **术语解释策略**：解释技术概念时，优先使用业界通用术语，必要时辅以中文解释；对于复杂概念，可先给出中文解释，再提供英文术语对照
- **代码语言规范**：
  - 代码中的变量、函数、类名等标识符使用英文命名
  - 代码注释可使用中文，便于理解（遵循项目的注释规范）
  - 代码示例中的字符串字面量根据实际业务场景选择语言
- **错误信息规范**：错误提示信息使用中文，便于用户理解；技术错误代码和标识符保持英文原文

### 响应原则
- **上下文理解**：充分理解用户需求，结合项目上下文、相关文件、配置文件等进行分析和回答
- **专业准确**：提供专业、准确的技术建议和解决方案，确保建议具有实用性和可操作性
- **理由说明**：在给出建议时，明确说明理由和适用场景，帮助用户理解技术选型和实现思路
- **主动调研**：遇到不确定的问题时，主动查阅代码库、配置文件或相关文档，确保回答的准确性
- **优先级处理**：先回答核心问题，再补充细节和扩展说明，确保关键信息优先传达
- **完整性保障**：提供完整、可执行的解决方案，包括必要的代码示例、配置说明和注意事项，避免碎片化回答
- **方案对比**：当存在多种实现方案时，对比分析各方案的优缺点，并推荐最适合当前场景的方案
- **不确定处理**：对于无法确定或超出能力范围的问题，明确说明不确定的原因，提供可能的解决方向或建议查阅的文档
- **自我检查**：回答完成后，立即对回答内容进行检查、纠错和修复，确保信息准确无误

## 开发工具配置

### Node.js 版本管理
- **必须使用 Volta 管理 Node.js 版本**，确保开发环境一致性
- **全局安装要求**：Volta 必须全局安装，在使用前应检查是否已安装
- **检查方式**：执行 `volta --version` 检查是否已安装
- **安装方式**：若未安装，通过官方安装脚本或包管理器进行全局安装
  - Windows: `winget install Volta.Volta` 或使用官方安装脚本
  - macOS/Linux: `curl https://get.volta.sh | bash` 或使用包管理器
- **安装后验证**：安装完成后通过 `volta --version` 确认安装成功
- **版本锁定**：若项目 `package.json` 中未指定 Node.js 版本，执行 `volta pin node@latest` 锁定最新 LTS 版本
- **配置检查**：优先检查项目中是否已存在 Volta 配置，遵循现有配置

### 包管理器选择
- **优先使用 @antfu/ni 智能命令**：
  - **全局安装要求**：`@antfu/ni` 必须全局安装，在使用前应检查是否已安装
    - **检查方式**：执行 `ni --version` 或 `which ni` 检查是否已安装
    - **安装方式**：若未安装，执行 `npm install -g @antfu/ni` 进行全局安装
    - **安装后验证**：安装完成后通过 `ni --version` 确认安装成功
  - **使用方式**：
    - 使用 `ni` 安装依赖（自动识别项目锁文件）
    - 使用 `nr` 运行 package.json 中的脚本命令
    - 自动识别项目锁文件类型（bun.lockb、pnpm-lock.yaml、package-lock.json、yarn.lock）
- **降级方案**：若 ni 不可用，使用 **npm** 作为备选包管理器
- **锁文件检查**：执行包管理命令前，优先检查项目根目录的锁文件类型，使用对应的包管理器

## 项目架构规范

### 目录结构设计原则
- **分层架构**：按业务领域或功能模块划分目录，严格遵循关注点分离原则
- **命名一致性**：采用描述性命名，目录和文件名需清晰反映其用途和职责
- **模块化设计**：
  - 相关功能聚合到同一模块，保持高内聚
  - 最小化跨模块依赖，降低耦合度
  - 每个模块职责明确，边界清晰
- **模块入口规范**：
  - 每个模块必须包含 `index.ts`（或 `index.tsx`）作为聚合导出入口
  - 避免在模块外部直接导入模块内部文件
  - 通过 `index.ts` 统一管理模块的对外接口
- **层级控制**：
  - 目录嵌套深度不超过 3-4 层，保持结构清晰可维护
  - 避免过深的嵌套导致路径冗长和导航困难
- **资源分类**：
  - 严格区分源代码（`src/`）、静态资源（`public/` 或 `assets/`）、配置文件（`configs/`）和测试文件（`tests/` 或 `__tests__/`）
- **依赖管理**：
  - 统一在 `package.json` 中声明所有依赖，避免分散配置
  - 不使用全局依赖，确保项目依赖可复现
  - **版本锁定策略**：
    - 生产依赖使用精确版本或版本范围锁定
    - 开发依赖可使用 `^` 或 `~` 允许小版本更新
    - 定期更新依赖，关注安全漏洞修复
  - **依赖分类**：
    - 严格区分 `dependencies` 和 `devDependencies`
    - 运行时必需的依赖放入 `dependencies`
    - 仅在开发、构建、测试时需要的依赖放入 `devDependencies`
  - **环境变量管理**：
    - 使用 `.env` 文件管理环境变量（`.env.local`、`.env.development`、`.env.production` 等）
    - 敏感信息（如 API 密钥）不应提交到版本控制系统
    - 在 `.gitignore` 中忽略 `.env.local` 等包含敏感信息的文件
    - 提供 `.env.example` 文件作为环境变量模板
- **约定优先原则**：
  - 优先遵循项目现有的结构和命名约定
  - 其次采用框架官方推荐的项目结构
  - 最后参考行业最佳实践

## 代码开发准则

### 代码质量标准
- **可测试性**：
  - 组件保持单一职责原则（SRP）
  - 业务逻辑与视图层分离，便于单元测试
  - 函数保持纯函数特性，避免副作用
- **DRY 原则**（Don't Repeat Yourself）：
  - 提取公共逻辑为独立的工具函数或工具类
  - 消除代码重复，提升可维护性
  - 公共逻辑放置在 `utils/` 或 `helpers/` 目录
- **简洁性**：
  - 遵循 KISS 原则（Keep It Simple, Stupid）
  - 避免过度设计和过早优化
  - 优先选择简单、直接的实现方案
- **语义化命名**：
  - 变量、函数、类名需准确描述其用途和含义
  - 使用有意义的命名，避免缩写和单字母变量（循环计数器除外）
  - 布尔值使用 `is`、`has`、`should` 等前缀

### TypeScript 类型规范
- **类型定义原则**：
  - **优先使用类型推断**：充分利用 TypeScript 的类型推断能力，避免不必要的类型注解，保持代码简洁
- **命名规范**：
  - 变量、函数使用 `camelCase`
  - 类、接口、类型别名、枚举使用 `PascalCase`
  - 常量使用 `UPPER_CASE`
  - 私有成员可使用 `_` 前缀（如 `_privateMethod`）
- **接口与类型选择**：
  - 优先使用 `interface` 定义对象类型，便于扩展
  - 使用 `type` 定义联合类型、交叉类型或复杂类型
  - 避免定义空接口，除非用于扩展或标记
- **类型安全**：
  - 启用严格模式（`strict: true`）
  - 充分利用类型系统的优势，减少运行时错误
  - 为第三方库缺失的类型定义添加类型声明文件

### 代码风格一致性
- 严格遵循项目配置的代码规范（ESLint、Prettier 等）
- 遵循项目特定的代码风格规则
- 保持整个项目的代码风格统一

### 代码实现优先级
- **最优方案选择**：优先选用极简、优雅、性能三者兼具的实现方案
- **实现优先级排序**：
  1. **极简性**：代码简洁、易读、易理解
  2. **代码优雅**：结构清晰、逻辑合理、符合设计模式
  3. **性能优化**：在保证前两者的基础上，考虑性能优化
- **避免过度优化**：不要为了微小的性能提升而牺牲代码可读性

### 注释编写规范

#### JSDoc 标准
所有变量、函数、类、接口的类型定义必须使用 **JSDoc 格式**进行注释

#### 注释类型与格式

**1. 简单注释**（仅有标题时）
```typescript
/** 用户服务类 */
```

**2. 详细注释**（需要描述说明时）
```typescript
/**
 * 用户服务类
 *
 * 负责用户相关的业务逻辑处理，包括注册、登录、信息管理等核心功能
 */
```

**3. 参数注释**（有参数或返回值时）
```typescript
/**
 * 获取用户信息
 * @param {string} userId - 用户唯一标识符
 * @returns {User} 用户对象，包含用户基本信息
 */
```

**4. 完整注释**（既有描述又有参数时）
```typescript
/**
 * 用户登录验证
 *
 * 通过用户名和密码进行用户身份验证，验证成功返回用户令牌。
 * 支持多种认证方式，包括普通登录和第三方登录。
 *
 * @param {string} username - 用户名或邮箱
 * @param {string} password - 用户密码（已加密）
 * @returns {Promise<string>} JWT 令牌字符串
 * @throws {AuthError} 当用户名或密码错误时抛出认证异常
 */
```

**5. 行内注释**（函数内部逻辑说明）
```typescript
// 验证用户权限，确保只有管理员可以访问
if (!hasPermission) {
  throw new Error('权限不足');
}
```

**6. 类型定义注释**（Interface 和 Type 定义）
```typescript
/**
 * API 统一响应接口
 * @template T 响应数据的类型
 */
interface APIResponse<T> {
  /** 响应状态码 */
  code: number;
  /** 响应数据 */
  data: T;
  /** 响应消息 */
  message: string;
}
```

#### 注释编写原则
- **必要性**：代码本身能表达清楚的逻辑，无需添加注释
- **准确性**：注释内容必须与代码实现保持一致
- **及时性**：修改代码时同步更新相关注释
- **简洁性**：注释简洁明了，避免冗余和废话

## 工程化实践

### 技术选型原则
- **成熟稳定优先**：优先选用经过验证、社区活跃的成熟解决方案
- **评估标准**：考虑维护状态、社区支持、文档完整性、性能表现等因素

### 架构设计原则
- **可维护性**：代码结构清晰，便于理解和修改
- **可扩展性**：预留扩展点，支持未来功能迭代
- **性能优化**：在保证代码质量的前提下，考虑性能优化

### 版本控制规范
- **提交信息规范**：
- **格式要求**：遵循约定式提交（Conventional Commits）格式：`<type>(<scope>): <subject>`
- **分支管理**：
  - 遵循项目的分支策略（如 Git Flow、GitHub Flow）
  - 保持主分支（main/master）代码始终可运行
  - 功能开发使用特性分支，合并前需进行代码审查

### 错误处理规范
- **全面性**：全面处理边界情况和异常状态
- **信息性**：提供有意义的错误信息，便于调试和问题定位
- **用户友好**：向用户展示友好的错误提示，避免暴露技术细节

## 文档编写标准

### 通用要求
- **格式统一**：统一使用 Markdown 格式编写文档
- **语言规范**：
  - 语言简洁明了，逻辑清晰
  - 主要使用中文编写，技术术语保留英文原文
- **内容同步**：文档内容必须与代码实现保持同步
- **质量检查**：严格检查拼写和语法错误，确保文档质量

### 文档目录结构
```
项目根目录/
├── README.md           # 项目概览和快速开始指南
├── docs/               # 详细文档目录
│   ├── development/    # 开发文档（按功能模块划分）
│   └── guide/          # 使用指南（按功能模块划分）
```

### README.md 必备内容
- **项目介绍**：项目名称、核心功能、应用场景
- **技术栈说明**：主要技术栈和关键依赖版本
- **目录结构说明**：项目目录结构树状图及说明
- **快速开始**：
  - 环境要求（Node.js 版本等）
  - 安装步骤
  - 开发环境启动
  - 构建和部署
- **开发指南**：开发规范、贡献指南等

### 文档组织规范
- **结构原则**：采用"总-分"结构，从概述到细节，层层递进
- **信息优先级**：关键信息前置，突出重点内容
- **内容组织**：相关内容集中组织，避免信息碎片化
- **格式规范**：
  - 合理使用标题层级（H1-H6），保持层级清晰
  - 使用列表、代码块、表格等元素提升可读性
  - 段落保持简洁，避免大段文字堆砌

### 代码示例标准
- **完整性**：提供完整可执行的代码片段，确保可以直接运行
- **简洁性**：示例代码简洁易懂，突出核心逻辑，避免不必要的复杂性
- **注释说明**：关键部分添加 JSDoc 注释，说明实现思路和注意事项
- **预期说明**：明确说明代码的预期输出和行为效果
- **版本同步**：确保示例代码与当前 API 版本保持同步，及时更新过时示例
