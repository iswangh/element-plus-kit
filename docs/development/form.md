# @iswangh/element-plus-kit-form å¼€å‘æ–‡æ¡£

æœ¬æ–‡æ¡£è¯¦ç»†è§£é‡Šäº† `@iswangh/element-plus-kit-form` åŒ…çš„å®Œæ•´å¼€å‘é…ç½®ï¼ŒåŒ…æ‹¬ `package.json`ã€`tsconfig.json` å’Œ `vite.config.ts` çš„è¯¦ç»†è¯´æ˜ã€‚

---

## ğŸ“‹ ç›®å½•

- [package.json é…ç½®è¯¦è§£](#packagejson-é…ç½®è¯¦è§£)
- [tsconfig.json é…ç½®è¯¦è§£](#tsconfigjson-é…ç½®è¯¦è§£)
- [vite.config.ts é…ç½®è¯¦è§£](#viteconfigts-é…ç½®è¯¦è§£)
- [é…ç½®æ–‡ä»¶ä¹‹é—´çš„å…³ç³»](#é…ç½®æ–‡ä»¶ä¹‹é—´çš„å…³ç³»)
- [å¼€å‘å·¥ä½œæµ](#å¼€å‘å·¥ä½œæµ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## package.json é…ç½®è¯¦è§£

### ğŸ“‹ å®Œæ•´é…ç½®ï¼ˆå¸¦æ³¨é‡Šè¯´æ˜ï¼‰

```json
{
  // åŒ…çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä½¿ç”¨ scoped package å‘½åï¼ˆ@iswangh/ å‰ç¼€ï¼‰ï¼Œé¿å…å‘½åå†²çª
  // éµå¾ª Monorepo å‘½åè§„èŒƒï¼š@ç»„ç»‡å/é¡¹ç›®å/åŒ…å
  // åœ¨é¡¹ç›®å†…éƒ¨ï¼Œå…¶ä»–åŒ…å¯ä»¥é€šè¿‡ @iswangh/element-plus-kit-form å¼•ç”¨æ­¤åŒ…
  "name": "@iswangh/element-plus-kit-form",
  
  // æŒ‡å®šåŒ…ä½¿ç”¨ ES Moduleï¼ˆESMï¼‰æ ¼å¼ï¼Œè€Œä¸æ˜¯ CommonJSï¼ˆCJSï¼‰
  // ä½¿ç”¨ ES Module è¯­æ³•ï¼ˆimport/exportï¼‰ï¼Œç°ä»£ JavaScript æ ‡å‡†ï¼Œæ›´å¥½çš„ Tree Shaking æ”¯æŒ
  // é…ç½®ä¸€è‡´æ€§ï¼šä¸ vite.config.ts çš„ formats: ['es'] å’Œ tsconfig.json çš„ module: "ESNext" ä¿æŒä¸€è‡´
  "type": "module",
  
  // åŒ…çš„ç‰ˆæœ¬å·ï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemVerï¼‰è§„èŒƒï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
  // 0.1.0ï¼šä¸»ç‰ˆæœ¬å·ï¼ˆ0ï¼‰= ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œæ¬¡ç‰ˆæœ¬å·ï¼ˆ1ï¼‰= å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œä¿®è®¢å·ï¼ˆ0ï¼‰= å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£
  "version": "0.1.0",
  
  // åŒ…çš„ç®€çŸ­æè¿°ï¼Œç”¨äº npm æœç´¢å’Œå±•ç¤ºï¼ˆå»ºè®®ä¸è¶…è¿‡ 160 ä¸ªå­—ç¬¦ï¼‰
  "description": "Element Plus Kit è¡¨å•ç»„ä»¶åŒ…",
  
  // åŒ…çš„è®¸å¯è¯ç±»å‹ï¼ˆApache-2.0 æ˜¯å¸¸ç”¨çš„å¼€æºè®¸å¯è¯ï¼Œæä¾›ä¸“åˆ©ä¿æŠ¤ï¼‰
  // å…è®¸å•†ä¸šä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘ï¼Œå¹¶æä¾›ä¸“åˆ©æˆæƒä¿æŠ¤
  "license": "Apache-2.0",
  
  // å‰¯ä½œç”¨æ–‡ä»¶åˆ—è¡¨ï¼šæ ‡è®°åŒ…å«å‰¯ä½œç”¨çš„æ–‡ä»¶ï¼Œå¸®åŠ©æ„å»ºå·¥å…·è¿›è¡Œ Tree Shaking ä¼˜åŒ–
  // æ ·å¼æ–‡ä»¶å’Œå…¥å£æ–‡ä»¶å¯èƒ½åŒ…å«å‰¯ä½œç”¨ï¼ˆå¦‚æ ·å¼æ³¨å…¥ã€å…¨å±€æ³¨å†Œç­‰ï¼‰ï¼Œéœ€è¦æ ‡è®°ä»¥é¿å…è¢«é”™è¯¯åœ° Tree Shaking
  "sideEffects": [
    "./dist/index.js",
    "./dist/style.css"
  ],
  
  // å®šä¹‰åŒ…çš„å¯¼å‡ºå…¥å£ï¼Œè¿™æ˜¯ç°ä»£ npm åŒ…çš„æ ‡å‡†é…ç½®æ–¹å¼ï¼ˆNode.js 12+ æ”¯æŒï¼‰
  // æ›´ç²¾ç¡®çš„æ§åˆ¶ã€æ›´å¥½çš„å®‰å…¨æ€§ã€æ”¯æŒæ¡ä»¶å¯¼å‡ºã€TypeScript æ”¯æŒã€æ ·å¼æ–‡ä»¶å¯¼å‡º
  // é…ç½®ä¸€è‡´æ€§è¯´æ˜ï¼š
  //   - è¾“å‡ºç›®å½•ï¼šæ‰€æœ‰å¯¼å‡ºè·¯å¾„éƒ½æŒ‡å‘ dist/ ç›®å½•ï¼Œä¸ tsconfig.json çš„ outDir å’Œ vite.config.ts çš„é»˜è®¤è¾“å‡ºç›®å½•ä¸€è‡´
  //   - ç±»å‹å®šä¹‰ï¼šæ¯ä¸ªå…¥å£éƒ½æä¾›å¯¹åº”çš„ç±»å‹å®šä¹‰æ–‡ä»¶ï¼Œä¸ tsconfig.json çš„ declaration: true é…ç½®ä¸€è‡´
  //   - æ ·å¼æ–‡ä»¶ï¼šæ”¯æŒå•ç‹¬å¯¼å…¥æ ·å¼æ–‡ä»¶ï¼Œä¸ vite.config.ts çš„ cssCodeSplit: false å’Œ assetFileNames é…ç½®ä¸€è‡´
  "exports": {
    // ä¸»å…¥å£ç‚¹ï¼Œå¯¹åº” import pkg from '@iswangh/element-plus-kit-form'
    // types: TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶è·¯å¾„ï¼ˆä¸ tsconfig.json çš„ outDir ä¸€è‡´ï¼‰
    // import: ES Module å¯¼å…¥æ—¶çš„å…¥å£æ–‡ä»¶ï¼ˆä¸ vite.config.ts çš„ build.lib.entry ä¸€è‡´ï¼‰
    // sideEffects: æ ‡è®°æ­¤å…¥å£åŒ…å«å‰¯ä½œç”¨ï¼Œé¿å…è¢«é”™è¯¯åœ° Tree Shaking
    ".": {
      "types": "./dist/index.d.ts",
      "import": "./dist/index.js",
      "sideEffects": ["./dist/index.js", "./dist/style.css"]
    },
    // æ ·å¼æ–‡ä»¶å…¥å£ç‚¹ï¼Œå¯¹åº” import '@iswangh/element-plus-kit-form/style.css'
    // ä¸ vite.config.ts çš„ rollupOptions.output.assetFileNames é…ç½®ä¿æŒä¸€è‡´
    "./style.css": "./dist/style.css"
  },
  
  // å‘åå…¼å®¹æ—§ç‰ˆæœ¬çš„ Node.js å’Œæ„å»ºå·¥å…·
  // main: CommonJS å’Œæ—§ç‰ˆ Node.js çš„å…¥å£ç‚¹
  // module: ä¸ºæ”¯æŒ ESM çš„æ‰“åŒ…å™¨æä¾› ES Module å…¥å£
  // types: TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶çš„è·¯å¾„
  // ä¼˜å…ˆçº§ï¼šæ”¯æŒ exports çš„ç¯å¢ƒä¼˜å…ˆä½¿ç”¨ exportsï¼Œä¸æ”¯æŒçš„ç¯å¢ƒå›é€€åˆ° mainã€moduleã€types
  "main": "./dist/index.js",
  "module": "./dist/index.js",
  "types": "./dist/index.d.ts",
  
  // å‘å¸ƒåˆ° npm æ—¶åŒ…å«çš„æ–‡ä»¶åˆ—è¡¨
  "files": [
    "README.md",
    "dist"
  ],
  
  // è„šæœ¬å‘½ä»¤é…ç½®
  "scripts": {
    // æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼šä½¿ç”¨ Vite è¿›è¡Œæ„å»ºï¼Œè¾“å‡ºåˆ° dist/ ç›®å½•ï¼Œç”Ÿæˆä¼˜åŒ–åçš„ä»£ç ã€ç±»å‹å®šä¹‰æ–‡ä»¶å’Œæ ·å¼æ–‡ä»¶
    "build": "vite build",
    
    // å¼€å‘æ¨¡å¼æ„å»ºï¼šç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡æ–°æ„å»ºï¼Œé€‚ç”¨äºå¼€å‘æ—¶æµ‹è¯•æ„å»ºè¾“å‡º
    "dev": "vite build --watch",
    
    // ç±»å‹æ£€æŸ¥ï¼šä½¿ç”¨ vue-tsc æ£€æŸ¥æ‰€æœ‰ TypeScript å’Œ Vue æ–‡ä»¶ï¼Œä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ï¼Œç”¨äº CI/CD ä¸­éªŒè¯ç±»å‹æ­£ç¡®æ€§
    "type-check": "vue-tsc --noEmit",
    
    // å‘å¸ƒå‰çš„è‡ªåŠ¨æ£€æŸ¥è„šæœ¬ï¼šåœ¨å‘å¸ƒåˆ° npm ä¹‹å‰è‡ªåŠ¨æ‰§è¡Œï¼Œç¡®ä¿æ„å»ºå’Œç±»å‹æ£€æŸ¥éƒ½é€šè¿‡
    // å¦‚æœæ„å»ºæˆ–ç±»å‹æ£€æŸ¥å¤±è´¥ï¼Œå‘å¸ƒä¼šè¢«é˜»æ­¢ï¼Œä¿è¯å‘å¸ƒåˆ° npm çš„åŒ…è´¨é‡
    "prepublishOnly": "pnpm build && pnpm type-check"
  },
  
  // å¯¹ç­‰ä¾èµ–ï¼šä½¿ç”¨æ­¤åŒ…çš„é¡¹ç›®å¿…é¡»å®‰è£…çš„ä¾èµ–
  // ä¸è‡ªåŠ¨å®‰è£…ï¼šnpm/pnpm ä¸ä¼šè‡ªåŠ¨å®‰è£… peer dependencies
  // ç‰ˆæœ¬è¦æ±‚ï¼š
  //   - element-plus: "^2.11.7" è¡¨ç¤ºå…¼å®¹ 2.11.7 åŠä»¥ä¸Šã€3.0.0 ä»¥ä¸‹çš„ç‰ˆæœ¬
  //   - vue: "^3.5.23" è¡¨ç¤ºå…¼å®¹ 3.5.23 åŠä»¥ä¸Šã€4.0.0 ä»¥ä¸‹çš„ç‰ˆæœ¬
  // é¿å…é‡å¤å®‰è£…ï¼šç¡®ä¿é¡¹ç›®ä¸­åªæœ‰ä¸€ä¸ª Vue å’Œ Element Plus å®ä¾‹
  // ä¸ºä»€ä¹ˆä½¿ç”¨ peer dependenciesï¼š
  //   - é¿å…ç‰ˆæœ¬å†²çªï¼šç¡®ä¿ä½¿ç”¨é¡¹ç›®ä¸­çš„ Vue å’Œ Element Plus ç‰ˆæœ¬
  //   - å‡å°åŒ…ä½“ç§¯ï¼šä¸å°† Vue å’Œ Element Plus æ‰“åŒ…è¿›åº“ä¸­
  //   - çµæ´»æ€§ï¼šå…è®¸ç”¨æˆ·é€‰æ‹© Vue å’Œ Element Plus ç‰ˆæœ¬ï¼ˆåœ¨å…¼å®¹èŒƒå›´å†…ï¼‰
  // é…ç½®ä¸€è‡´æ€§ï¼šä¸ vite.config.ts çš„ rollupOptions.external é…ç½®ä¿æŒä¸€è‡´ï¼Œè¿™äº›ä¾èµ–ä¸ä¼šè¢«æ‰“åŒ…è¿›åº“ä¸­
  "peerDependencies": {
    "element-plus": "^2.11.7",
    "vue": "^3.5.23"
  },
  
  // è¿è¡Œæ—¶ä¾èµ–ï¼šä¼šè¢«æ‰“åŒ…è¿›åº“ä¸­
  // workspace:*ï¼šMonorepo å·¥ä½œåŒºåè®®ï¼Œè¡¨ç¤ºä½¿ç”¨å·¥ä½œåŒºå†…çš„ core åŒ…
  // æ­¤ä¾èµ–ä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆçš„åº“æ–‡ä»¶ä¸­ï¼Œç”¨æˆ·å®‰è£… form åŒ…æ—¶ï¼Œcore åŒ…ä¹Ÿä¼šè¢«å®‰è£…
  // ä¸ºä»€ä¹ˆä½¿ç”¨ workspace åè®®ï¼š
  //   - å¼€å‘æ—¶ä½¿ç”¨æºç ï¼šå¼€å‘æ—¶ç›´æ¥ä½¿ç”¨å·¥ä½œåŒºå†…çš„æºç 
  //   - å‘å¸ƒæ—¶è‡ªåŠ¨è§£æï¼šå‘å¸ƒåˆ° npm æ—¶ï¼Œpnpm ä¼šè‡ªåŠ¨è§£æä¸ºæ­£ç¡®çš„ç‰ˆæœ¬å·
  //   - é¿å…ç‰ˆæœ¬å†²çªï¼šç¡®ä¿ä½¿ç”¨å·¥ä½œåŒºå†…çš„ç‰ˆæœ¬
  // æ³¨æ„ï¼šform åŒ…ä¾èµ– core åŒ…ï¼Œcore åŒ…æä¾›å·¥å…·å‡½æ•°
  // é…ç½®ä¸€è‡´æ€§ï¼šcore åŒ…åœ¨ vite.config.ts çš„ rollupOptions.external ä¸­ä¹Ÿè¢«æ ‡è®°ä¸ºå¤–éƒ¨ä¾èµ–ï¼Œä¸ä¼šè¢«æ‰“åŒ…è¿›åº“ä¸­
  "dependencies": {
    "@iswangh/element-plus-kit-core": "workspace:*"
  },
  
  // å¼€å‘æ—¶ä¾èµ–ï¼šåªåœ¨å¼€å‘ã€æ„å»ºã€æµ‹è¯•æ—¶éœ€è¦ï¼Œä¸ä¼šè¢«æ‰“åŒ…å‘å¸ƒ
  "devDependencies": {
    // Element Plus å›¾æ ‡åº“ï¼šç”¨äºè¡¨å•æ“ä½œæŒ‰é’®çš„å›¾æ ‡ï¼Œå¼€å‘æ—¶éœ€è¦ï¼Œç”¨äºç±»å‹å®šä¹‰å’Œæµ‹è¯•
    "@element-plus/icons-vue": "^2.3.2",
    
    // Vite çš„ Vue æ’ä»¶ï¼šç”¨äºå¤„ç† .vue æ–‡ä»¶ï¼Œæ„å»ºæ—¶å¿…éœ€
    "@vitejs/plugin-vue": "^6.0.1",
    
    // Element Plus ç»„ä»¶åº“ï¼ˆå¼€å‘ç‰ˆæœ¬ï¼‰ï¼šå¼€å‘æ—¶æµ‹è¯•ç»„ä»¶ã€ç±»å‹å®šä¹‰ï¼ˆTypeScriptï¼‰ã€æ„å»ºæ—¶å¯èƒ½éœ€è¦
    // æ³¨æ„ï¼šelement-plus åœ¨ devDependencies ä¸­æ˜¯å¼€å‘ç‰ˆæœ¬ï¼Œå®é™…è¿è¡Œæ—¶ä½¿ç”¨ peerDependencies ä¸­çš„ç‰ˆæœ¬
    "element-plus": "^2.11.7",
    
    // Sass é¢„å¤„ç†å™¨ï¼šç”¨äºç¼–è¯‘ SCSS æ ·å¼æ–‡ä»¶
    "sass": "^1.93.3",
    
    // TypeScript ç¼–è¯‘å™¨ï¼šç±»å‹æ£€æŸ¥ã€ç¼–è¯‘ TypeScript ä»£ç 
    "typescript": "^5.9.2",
    
    // ç°ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼šæ„å»ºã€æ‰“åŒ…ã€å¼€å‘æœåŠ¡å™¨
    "vite": "^7.1.5",
    
    // Vite çš„ç±»å‹å®šä¹‰ç”Ÿæˆæ’ä»¶ï¼šè‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶ï¼ˆ.d.tsï¼‰ï¼Œç¡®ä¿å‘å¸ƒçš„åŒ…åŒ…å«å®Œæ•´çš„ç±»å‹æ”¯æŒ
    "vite-plugin-dts": "^4.5.4",
    
    // Vue 3 æ¡†æ¶ï¼ˆå¼€å‘ç‰ˆæœ¬ï¼‰ï¼šå¼€å‘æ—¶æµ‹è¯•ç»„ä»¶ã€ç±»å‹å®šä¹‰ï¼ˆTypeScriptï¼‰
    // æ³¨æ„ï¼švue åœ¨ devDependencies ä¸­æ˜¯å¼€å‘ç‰ˆæœ¬ï¼Œå®é™…è¿è¡Œæ—¶ä½¿ç”¨ peerDependencies ä¸­çš„ç‰ˆæœ¬
    "vue": "^3.5.23",
    
    // Vue 3 çš„ TypeScript ç±»å‹æ£€æŸ¥å·¥å…·ï¼šæ£€æŸ¥ .vue æ–‡ä»¶ä¸­çš„ TypeScript ç±»å‹ï¼Œç”Ÿæˆç±»å‹å®šä¹‰æ–‡ä»¶ï¼ˆ.d.tsï¼‰
    "vue-tsc": "^3.0.7"
  },
  
  // å‘å¸ƒé…ç½®ï¼šæŒ‡å®šå‘å¸ƒåˆ° npm æ—¶çš„è®¿é—®æƒé™
  "publishConfig": {
    "access": "public"
  }
}
```

---

## tsconfig.json é…ç½®è¯¦è§£

### ğŸ“‹ å®Œæ•´é…ç½®

```json
{
  // ç»§æ‰¿æ ¹ç›®å½•çš„åŸºç¡€ TypeScript é…ç½®
  "extends": "../../tsconfig.app.json",
  "compilerOptions": {
    // å¯ç”¨å¤åˆé¡¹ç›®æ¨¡å¼ï¼Œæ”¯æŒ TypeScript Project References
    "composite": true,
    // å¢é‡ç¼–è¯‘ä¿¡æ¯æ–‡ä»¶è·¯å¾„
    "tsBuildInfoFile": "../../node_modules/.tmp/packages-form.tsbuildinfo",
    // ç±»å‹åº“ï¼šES2022 å’Œ DOM API
    "lib": ["ES2022", "DOM"],
    // åŸºç¡€è·¯å¾„ï¼šå½“å‰åŒ…ç›®å½•
    "baseUrl": ".",
    // æ ¹ç›®å½•ï¼šsrc ç›®å½•
    "rootDir": "./src",
    // æ¨¡å—ç³»ç»Ÿï¼šESNextï¼ˆES æ¨¡å—ï¼‰
    "module": "ESNext",
    // æ¨¡å—è§£æç­–ç•¥ï¼šä½¿ç”¨ bundler æ¨¡å¼
    "moduleResolution": "bundler",
    // è·¯å¾„åˆ«åï¼šæ¸…ç©ºç»§æ‰¿çš„ pathsï¼Œå¼ºåˆ¶ä½¿ç”¨åŒ…åå¯¼å…¥
    // é…ç½®ä¸€è‡´æ€§ï¼šä¸ vite.config.ts ä¸é…ç½® resolve.alias ä¿æŒä¸€è‡´ï¼Œç»Ÿä¸€ä½¿ç”¨åŒ…åå¯¼å…¥ï¼Œpnpm workspace è‡ªåŠ¨è§£æåˆ°å·¥ä½œåŒºå†…çš„æºç 
    "paths": {},
    // å¯ç”¨ package.json exports å­—æ®µè§£æ
    "resolvePackageJsonExports": true,
    // ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ï¼ˆ.d.tsï¼‰
    "declaration": true,
    // ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶çš„ source map
    "declarationMap": true,
    // å…è®¸è¾“å‡ºæ–‡ä»¶ï¼ˆæ„å»ºæ—¶éœ€è¦ï¼‰
    "noEmit": false,
    // è¾“å‡ºç›®å½•ï¼šdist
    // é…ç½®ä¸€è‡´æ€§ï¼šä¸ package.json çš„ exports è·¯å¾„å’Œ vite.config.ts çš„é»˜è®¤è¾“å‡ºç›®å½•ä¿æŒä¸€è‡´
    "outDir": "./dist",
    // è·³è¿‡ç±»å‹åº“çš„ç±»å‹æ£€æŸ¥ï¼ˆæå‡ç¼–è¯‘é€Ÿåº¦ï¼‰
    "skipLibCheck": true
  },
  // é¡¹ç›®å¼•ç”¨ï¼šä¾èµ– core åŒ…ï¼ˆé€šè¿‡ TypeScript Project References ç®¡ç†ç±»å‹ä¾èµ–ï¼‰
  "references": [
    {
      "path": "../core",
      // ä¸å‰ç½®è¾“å‡ºï¼šform åŒ…ä¸åŒ…å« core åŒ…çš„ä»£ç 
      "prepend": false
    }
  ],
  // Vue ç¼–è¯‘å™¨é€‰é¡¹ï¼ˆform åŒ…åŒ…å« Vue ç»„ä»¶ï¼Œå¿…é¡»é…ç½®ï¼‰
  "vueCompilerOptions": {
    // Vue ç‰ˆæœ¬ï¼š3ï¼ˆVue 3ï¼‰
    "target": 3,
    // å…¨å±€ç±»å‹å®šä¹‰æ–‡ä»¶è·¯å¾„
    "globalTypesPath": "../../node_modules/.tmp/vue-global-types.d.ts"
  },
  // åŒ…å«çš„æ–‡ä»¶ï¼šsrc ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
  "include": ["src/**/*"],
  // æ’é™¤çš„æ–‡ä»¶ï¼šnode_modules å’Œ dist ç›®å½•
  "exclude": ["node_modules", "dist"]
}
```

---

## vite.config.ts é…ç½®è¯¦è§£

### ğŸ“‹ å®Œæ•´é…ç½®

```typescript
// è·¯å¾„è§£æå·¥å…·ï¼šåœ¨ ES Module ç¯å¢ƒä¸­è·å–å½“å‰æ–‡ä»¶ç›®å½•
import { resolve } from 'node:path'
import { fileURLToPath } from 'node:url'
// Vue æ’ä»¶ï¼šå¤„ç† .vue æ–‡ä»¶ï¼ˆform åŒ…åŒ…å« Vue ç»„ä»¶ï¼Œå¿…éœ€é…ç½®ï¼‰
import vue from '@vitejs/plugin-vue'
// Vite é…ç½®å®šä¹‰å‡½æ•°ï¼šæä¾›ç±»å‹æç¤ºå’Œé…ç½®éªŒè¯
import { defineConfig } from 'vite'
// TypeScript ç±»å‹å®šä¹‰ç”Ÿæˆæ’ä»¶ï¼šè‡ªåŠ¨ç”Ÿæˆ .d.ts æ–‡ä»¶
import dts from 'vite-plugin-dts'

// è·å–å½“å‰æ–‡ä»¶ç›®å½•ï¼ˆES Module ç¯å¢ƒä¸­çš„ __dirname æ›¿ä»£æ–¹æ¡ˆï¼‰
const __dirname = fileURLToPath(new URL('.', import.meta.url))

/**
 * Form åŒ…æ„å»ºé…ç½®
 *
 * è¡¨å•ç»„ä»¶åŒ…ï¼Œä¾èµ– core åŒ…
 */
export default defineConfig({
  plugins: [
    // Vue å•æ–‡ä»¶ç»„ä»¶æ”¯æŒï¼ˆform åŒ…åŒ…å« Vue ç»„ä»¶ï¼Œå¿…éœ€é…ç½®ï¼‰
    vue(),
    // ç±»å‹å£°æ˜æ–‡ä»¶ç”Ÿæˆæ’ä»¶
    dts({
      // åŒ…å«çš„æ–‡ä»¶ï¼šæ‰€æœ‰ src ç›®å½•ä¸‹çš„æ–‡ä»¶
      include: ['src/**/*'],
      // æ’é™¤çš„æ–‡ä»¶ï¼šæµ‹è¯•æ–‡ä»¶
      exclude: ['src/**/*.test.ts', 'src/**/*.spec.ts'],
      // è¾“å‡ºç›®å½•ï¼šdist
      outDir: 'dist',
      // å¤åˆ¶ç±»å‹å£°æ˜æ–‡ä»¶åˆ°è¾“å‡ºç›®å½•
      copyDtsFiles: true,
      // æ—¥å¿—çº§åˆ«ï¼šé™é»˜ï¼ˆä¸è¾“å‡ºæ—¥å¿—ï¼‰
      logLevel: 'silent',
    }),
  ],
  build: {
    // åº“æ¨¡å¼é…ç½®
    lib: {
      // å…¥å£æ–‡ä»¶ï¼ˆå¯¹åº” package.json çš„ exports["."]ï¼‰
      entry: resolve(__dirname, 'src/index.ts'),
      // åº“åç§°ï¼ˆç”¨äº UMD æ ¼å¼ï¼Œå½“å‰ä»…ä½¿ç”¨ ES æ ¼å¼ï¼‰
      name: 'ElementPlusKitForm',
      // è¾“å‡ºæ–‡ä»¶åï¼šindex.js
      fileName: 'index',
      // è¾“å‡ºæ ¼å¼ï¼šä»… ES æ¨¡å—
      // é…ç½®ä¸€è‡´æ€§ï¼šä¸ package.json çš„ type: "module" å’Œ tsconfig.json çš„ module: "ESNext" ä¿æŒä¸€è‡´
      formats: ['es'],
    },
    rollupOptions: {
      // å¤–éƒ¨ä¾èµ–ï¼šä¸æ‰“åŒ…åˆ°åº“ä¸­ï¼Œç”±ä½¿ç”¨è€…æä¾›ï¼ˆé¿å…é‡å¤æ‰“åŒ…ï¼Œå‡å°åº“ä½“ç§¯ï¼‰
      // é…ç½®ä¸€è‡´æ€§ï¼šä¸ package.json çš„ peerDependencies å’Œ dependencies ä¿æŒä¸€è‡´
      //   - vue å’Œ element-plusï¼šåœ¨ peerDependencies ä¸­å£°æ˜ï¼Œç”±ä½¿ç”¨è€…æä¾›
      //   - @iswangh/element-plus-kit-coreï¼šåœ¨ dependencies ä¸­å£°æ˜ï¼Œä½†æ ‡è®°ä¸ºå¤–éƒ¨ä¾èµ–ï¼Œè¿è¡Œæ—¶é€šè¿‡åŒ…ç®¡ç†å™¨è§£æ
      external: ['vue', 'element-plus', '@iswangh/element-plus-kit-core'],
      output: {
        // å…¨å±€å˜é‡æ˜ å°„ï¼ˆç”¨äº UMD æ ¼å¼ï¼Œå½“å‰æœªä½¿ç”¨ï¼‰
        globals: {
          'vue': 'Vue',
          'element-plus': 'ElementPlus',
        },
        // æ ·å¼æ–‡ä»¶è¾“å‡ºåç§°ï¼šç»Ÿä¸€è¾“å‡ºä¸º style.cssï¼ˆå¯¹åº” package.json çš„ exports["./style.css"]ï¼‰
        assetFileNames: 'style.css',
      },
    },
    // ç¦ç”¨ CSS ä»£ç åˆ†å‰²ï¼šæ‰€æœ‰æ ·å¼åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼ˆstyle.cssï¼‰
    cssCodeSplit: false,
  },
})
```

**æ³¨æ„**ï¼šform åŒ…ä¸é…ç½® `resolve.alias`ï¼Œä½¿ç”¨åŒ…åå¯¼å…¥å³å¯ã€‚pnpm workspace ä¼šè‡ªåŠ¨å°†åŒ…åï¼ˆ`@iswangh/element-plus-kit-core`ï¼‰è§£æåˆ°å·¥ä½œåŒºå†…çš„æºç ï¼ŒVite åŸç”Ÿæ”¯æŒé€šè¿‡ `package.json` çš„ `exports` å­—æ®µè§£æåŒ…åã€‚

---

## é…ç½®æ–‡ä»¶ä¹‹é—´çš„å…³ç³»

### ğŸ”— é…ç½®å…³è”å›¾

```
package.json
    â”‚
    â”œâ”€ type: "module" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                â”‚
    â”œâ”€ exports.import â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                â”‚
    â”œâ”€ exports["./style.css"] â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                â”‚
    â””â”€ scripts.build â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                     â”‚
vite.config.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ æ„å»ºé…ç½®
    â”‚                                â”‚
    â”œâ”€ build.lib.formats: ['es'] â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ build.rollupOptions.external â”€â”
    â”‚                                 â”‚
    â””â”€ resolve.alias â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                      â”‚
tsconfig.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ ç±»å‹é…ç½®
    â”‚                                 â”‚
    â”œâ”€ outDir: "./dist" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ paths (åˆ«å) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                 â”‚
    â””â”€ declaration: true â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                      â”‚
package.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ exports.types: "./dist/index.d.ts"
    â””â”€ exports["./style.css"]: "./dist/style.css"
```


## å¼€å‘å·¥ä½œæµ

### ğŸš€ å¼€å‘æµç¨‹

#### 1. å¼€å‘é˜¶æ®µ

```bash
# å¯åŠ¨ç›‘å¬æ¨¡å¼ï¼Œè‡ªåŠ¨é‡æ–°æ„å»º
npm run dev
```

**æµç¨‹**ï¼š
1. ä¿®æ”¹ `src/` ç›®å½•ä¸‹çš„æºä»£ç 
2. Vite è‡ªåŠ¨æ£€æµ‹å˜åŒ–å¹¶é‡æ–°æ„å»º
3. è¾“å‡ºåˆ° `dist/` ç›®å½•
4. å…¶ä»–åŒ…å¯ä»¥ç«‹å³ä½¿ç”¨æ›´æ–°åçš„ä»£ç 

---

#### 2. ç±»å‹æ£€æŸ¥

```bash
# æ£€æŸ¥ç±»å‹é”™è¯¯
npm run type-check
```

**æµç¨‹**ï¼š
1. ä½¿ç”¨ `vue-tsc` æ£€æŸ¥æ‰€æœ‰ TypeScript å’Œ Vue æ–‡ä»¶
2. ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ï¼ˆ`--noEmit`ï¼‰
3. å‘ç°ç±»å‹é”™è¯¯æ—¶åœæ­¢å¹¶æŠ¥å‘Š

**ä½¿ç”¨åœºæ™¯**ï¼š
- æäº¤ä»£ç å‰æ£€æŸ¥ç±»å‹é”™è¯¯
- CI/CD æµç¨‹ä¸­çš„ç±»å‹éªŒè¯
- ç¡®ä¿ä»£ç è´¨é‡

---

#### 3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

**æµç¨‹**ï¼š
1. Vite ä½¿ç”¨ Rollup è¿›è¡Œæ„å»º
2. TypeScript ç¼–è¯‘ç”Ÿæˆ JavaScript å’Œç±»å‹å®šä¹‰
3. Vue ç»„ä»¶ç¼–è¯‘ä¸º JavaScript
4. CSS æ–‡ä»¶åˆå¹¶ä¸º `style.css`
5. è¾“å‡ºåˆ° `dist/` ç›®å½•
6. å‡†å¤‡å‘å¸ƒåˆ° npm

**è¾“å‡ºæ–‡ä»¶**ï¼š
- `dist/index.js`ï¼šJavaScript æ–‡ä»¶
- `dist/index.d.ts`ï¼šç±»å‹å®šä¹‰æ–‡ä»¶
- `dist/style.css`ï¼šæ ·å¼æ–‡ä»¶

---

### ğŸ“¦ å‘å¸ƒæµç¨‹

**é‡è¦**ï¼šåœ¨ Monorepo é¡¹ç›®ä¸­ï¼Œåº”ä½¿ç”¨æ ¹ç›®å½•çš„å‘å¸ƒå‘½ä»¤ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨åŒ…ç›®å½•ä¸­æ‰§è¡Œ `npm publish`ã€‚

#### 1. åˆ†æ”¯æ£€æŸ¥

å‘å¸ƒå‰ä¼šè‡ªåŠ¨æ£€æŸ¥å½“å‰ Git åˆ†æ”¯ï¼Œåªèƒ½åœ¨ `main` æˆ– `master` åˆ†æ”¯ä¸Šå‘å¸ƒï¼š

```bash
# å•ç‹¬æ£€æŸ¥åˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
pnpm check:branch
```

#### 2. å‘å¸ƒ

ä½¿ç”¨æ ¹ç›®å½•çš„å‘å¸ƒå‘½ä»¤ï¼ˆ**æ¨è**ï¼‰ï¼š

```bash
# ä»é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
pnpm publish:form
```

**è‡ªåŠ¨æ‰§è¡Œæµç¨‹**ï¼š
1. **åˆ†æ”¯æ£€æŸ¥**ï¼šæ£€æŸ¥å½“å‰åˆ†æ”¯æ˜¯å¦ä¸º `main` æˆ– `master`
2. **æ„å»ºå’Œç±»å‹æ£€æŸ¥**ï¼šè‡ªåŠ¨æ‰§è¡Œ `prepublishOnly` è„šæœ¬ï¼ˆ`pnpm build && pnpm type-check`ï¼‰
3. **å‘å¸ƒ**ï¼šå¦‚æœæ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œæ‰§è¡Œå‘å¸ƒæ“ä½œ

**æ‰‹åŠ¨æ‰§è¡Œ**ï¼ˆä¸æ¨èï¼Œä»…ç”¨äºæµ‹è¯•ï¼‰ï¼š

```bash
# è¿›å…¥åŒ…ç›®å½•
cd packages/form

# æ‰‹åŠ¨æ„å»º
pnpm build

# æ‰‹åŠ¨ç±»å‹æ£€æŸ¥
pnpm type-check

# ç›´æ¥å‘å¸ƒï¼ˆä¸æ¨èï¼Œä¼šè·³è¿‡åˆ†æ”¯æ£€æŸ¥ï¼‰
npm publish
```

**å‘å¸ƒå†…å®¹**ï¼š
- `dist/` ç›®å½•ï¼ˆæ„å»ºäº§ç‰©ï¼‰
- `README.md`ï¼ˆæ–‡æ¡£ï¼‰
- `package.json`ï¼ˆé…ç½®ï¼‰

---

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆ `vite.config.ts` ä¸­éœ€è¦é…ç½® `plugins: [vue()]`ï¼Œè€Œ core åŒ…ä¸éœ€è¦ï¼Ÿ

**A**: 
- core åŒ…æ˜¯çº¯ TypeScript å·¥å…·å‡½æ•°åŒ…ï¼Œä¸åŒ…å« Vue ç»„ä»¶
- form åŒ…åŒ…å« Vue ç»„ä»¶ï¼ˆ`.vue` æ–‡ä»¶ï¼‰ï¼Œéœ€è¦ Vue æ’ä»¶æ¥å¤„ç†
- Vue æ’ä»¶ç”¨äºç¼–è¯‘å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰

---

### Q2: ä¸ºä»€ä¹ˆ `cssCodeSplit: false`ï¼Ÿ

**A**: 
- åº“é¡¹ç›®é€šå¸¸åªéœ€è¦ä¸€ä¸ª CSS æ–‡ä»¶
- ç®€åŒ–ç”¨æˆ·ä½¿ç”¨ï¼šåªéœ€å¯¼å…¥ä¸€ä¸ª CSS æ–‡ä»¶
- å‡å°‘ HTTP è¯·æ±‚

---

### Q3: `external` ä¸­çš„ä¾èµ–å’Œ `peerDependencies` çš„å…³ç³»ï¼Ÿ

**A**: 
- `peerDependencies`ï¼šå£°æ˜ä½¿ç”¨åº“çš„é¡¹ç›®å¿…é¡»å®‰è£…çš„ä¾èµ–
- `external`ï¼šå‘Šè¯‰æ„å»ºå·¥å…·ä¸è¦æ‰“åŒ…è¿™äº›ä¾èµ–
- ä¸¤è€…å¿…é¡»ä¿æŒä¸€è‡´ï¼Œç¡®ä¿ä¾èµ–ä¸è¢«é‡å¤æ‰“åŒ…

---

### Q4: ä¸ºä»€ä¹ˆä¸éœ€è¦é…ç½® `paths` å’Œ `alias`ï¼Ÿ

**A**: 
- **ä½¿ç”¨åŒ…åå¯¼å…¥**ï¼šåœ¨ Monorepo ä¸­ï¼Œåº”è¯¥ä½¿ç”¨åŒ…åï¼ˆ`@iswangh/element-plus-kit-core`ï¼‰è€Œä¸æ˜¯è·¯å¾„åˆ«å
- **pnpm workspace è‡ªåŠ¨è§£æ**ï¼špnpm workspace ä¼šè‡ªåŠ¨å°†åŒ…åè§£æåˆ°å·¥ä½œåŒºå†…çš„æºç 
- **Vite åŸç”Ÿæ”¯æŒ**ï¼šVite åŸç”Ÿæ”¯æŒé€šè¿‡ `package.json` çš„ `exports` å­—æ®µè§£æåŒ…å
- **ç®€åŒ–é…ç½®**ï¼šä¸éœ€è¦ç»´æŠ¤è·¯å¾„åˆ«åé…ç½®ï¼Œå‡å°‘é…ç½®å¤æ‚åº¦
- **ä¸å‘å¸ƒåä¸€è‡´**ï¼šå¼€å‘ç¯å¢ƒå’Œå‘å¸ƒåçš„å¯¼å…¥æ–¹å¼å®Œå…¨ä¸€è‡´

---

### Q5: å¦‚ä½•æ·»åŠ æ–°çš„å¯¼å‡ºå…¥å£ï¼Ÿ

**A**: 

1. **ä¿®æ”¹ `package.json`**ï¼š
```json
"exports": {
  ".": {
    "types": "./dist/index.d.ts",
    "import": "./dist/index.js"
  },
  "./style.css": "./dist/style.css",
  "./utils": {
    "types": "./dist/utils.d.ts",
    "import": "./dist/utils.js"
  }
}
```

2. **ä¿®æ”¹ `vite.config.ts`**ï¼ˆå¦‚æœéœ€è¦å•ç‹¬æ„å»ºï¼‰ï¼š
```typescript
build: {
  lib: {
    entry: {
      index: resolve(__dirname, 'src/index.ts'),
      utils: resolve(__dirname, 'src/utils/index.ts'),
    },
    // ...
  }
}
```

---

### Q6: ä¸ºä»€ä¹ˆæ ·å¼æ–‡ä»¶éœ€è¦å•ç‹¬å¯¼å‡ºï¼Ÿ

**A**: 
- ç”¨æˆ·å¯èƒ½åªéœ€è¦ç»„ä»¶ï¼Œä¸éœ€è¦æ ·å¼ï¼ˆå¦‚æœä½¿ç”¨è‡ªå·±çš„æ ·å¼ï¼‰
- ç”¨æˆ·å¯èƒ½åªéœ€è¦æ ·å¼ï¼Œä¸éœ€è¦ç»„ä»¶ï¼ˆå¦‚æœä½¿ç”¨å…¶ä»–å®ç°ï¼‰
- æä¾›çµæ´»æ€§ï¼Œè®©ç”¨æˆ·é€‰æ‹©å¯¼å…¥çš„å†…å®¹

---

## ğŸ“š ç›¸å…³èµ„æº

- [npm package.json å®˜æ–¹æ–‡æ¡£](https://docs.npmjs.com/cli/v9/configuring-npm/package-json)
- [TypeScript é…ç½®æ–‡æ¡£](https://www.typescriptlang.org/tsconfig)
- [Vite æ„å»ºé…ç½®](https://vitejs.dev/config/)
- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/)

---

## ğŸ“„ æ›´æ–°æ—¥å¿—

- **2024-XX-XX**ï¼šåˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«å®Œæ•´å¼€å‘é…ç½®è¯´æ˜
- **2024-XX-XX**ï¼šæ›´æ–° Vue ç‰ˆæœ¬åˆ° 3.5.23ï¼ŒElement Plus ç‰ˆæœ¬åˆ° 2.11.7

---

**æ–‡æ¡£ç»´æŠ¤è€…**ï¼šElement Plus Kit å›¢é˜Ÿ  
**æœ€åæ›´æ–°**ï¼š2024å¹´
